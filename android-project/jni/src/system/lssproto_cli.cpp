/*#ifdef __NEW_PROTOCOL

/* output by ./lsgen.perl 0.41 ( 1998 May)
 * made Mon Jun 12 11:17:33 2000
 * user kawata
 * host unicorn.lan.titan.co.jp
 * file /opt/kawata/sa/bin/output/lssproto_cli.c
 * util output/lssproto_util.c , output/lssproto_util.h
 * src  /opt/kawata/sa/bin/../doc/lssproto.html
 *//*
#define _LSSPROTOCLI_C_
//#include <windows.h>
#include "../systeminc/version.h"
#include "../systeminc/lssproto_cli.h"

void lssproto_SetClientLogFiles( char *r , char *w )
{
	lssproto_strcpysafe( lssproto_readlogfilename , r , sizeof( lssproto_readlogfilename ) );
	lssproto_strcpysafe( lssproto_writelogfilename , w , sizeof( lssproto_writelogfilename ) );
}
int lssproto_InitClient( int (*writefunc)(int,char*,int) ,int bufsiz ,int fd)
{
	int i;
	if( (void*)writefunc == NULL){lssproto.write_func = lssproto_default_write_wrap;} else {lssproto.write_func = writefunc;}
	lssproto_AllocateCommonWork(bufsiz);
	lssproto_stringwrapper = (char**)MALLOC(sizeof(char*) * MAXLSRPCARGS);
	if(lssproto_stringwrapper ==NULL)return -1;
	memset( lssproto_stringwrapper , 0, sizeof(char*)*MAXLSRPCARGS);
	for(i=0;i<MAXLSRPCARGS;i++){
		lssproto_stringwrapper[i] = (char*)MALLOC( bufsiz );
		if( lssproto_stringwrapper[i] == NULL){
			for(i=0;i<MAXLSRPCARGS;i++){FREE( lssproto_stringwrapper[i]);return -1;}
		}
	}
	return 0;
}
void lssproto_CleanupClient( void )
{
	int i;
	// Nuke start
	/*{ 
		int i;
		if (NJT_dummy) FREE(NJT_dummy);
		for (i=0;i<NJT_MAX;i++) if (NJT[i]) FREE(NJT[i]);
	}*/
	/*
	// Nuke end
	FREE( lssproto.work );
	FREE( lssproto.arraywork);
	FREE( lssproto.escapework );
	FREE( lssproto.val_str);
	FREE( lssproto.token_list );
	for(i=0;i<MAXLSRPCARGS;i++){FREE( lssproto_stringwrapper[i]);}
	FREE( lssproto_stringwrapper );
}


#else
*/

/* output by ./lsgen.perl 0.41 ( 1998 May)
 * made Mon Jun 12 11:17:33 2000
 * user kawata
 * host unicorn.lan.titan.co.jp
 * file /opt/kawata/sa/bin/output/lssproto_cli.c
 * util output/lssproto_util.c , output/lssproto_util.h
 * src  /opt/kawata/sa/bin/../doc/lssproto.html
 */
#define _LSSPROTOCLI_C_
//#include <windows.h>
#include "../systeminc/version.h"
#include "../systeminc/lssproto_cli.h"

// nuke: TNJ: ttom & nuke & jongan : prevent packet cheat
//extern char *NJT_dummy;
//extern char *NJT[NJT_MAX];

/*#define JNT \
	((lssproto.work[0]+lssproto.work[1]+lssproto.work[2]+lssproto.work[3]+ \
	lssproto.work[4]+lssproto.work[5]+lssproto.work[6]+lssproto.work[7])%NJT_MAX)

#define TNJ { if(NJT[JNT]) lssproto.work=NJT[JNT]; } 
*/


//cary
void old_lssproto_FC_send( int fd )
{
	lssproto_CreateHeader( lssproto.work , "FC" );
	lssproto_strcatsafe( lssproto.work , "" ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}
//end


/*
166 :   <LI><a name="CS_W"><font color=red>clienttoserver W( int x, int y, string direction);<br></font></a>
167 :       (Walk)¨÷?????????????????????úù¤e??????úÜ??
168 :       ??¨÷??????ıï????????????ûõ?????????????
169 :       ???§R¤e??????????????????¡u?£u???????¡q¤n?
170 :       ??????????W???????????????????????ûõ?
171 :       ûè???¤õ???¨÷???????????¢\???????????????
172 :       ??????????
173 :       ?????????¨÷????¨÷???MC??ıï?????????????MC
174 :       ????????????????????????????????????
175 :       ¨÷????ıÖ¢t????¨÷????úÜ?¢¬???????????
176 :       
177 : 
178 : 	
179 :       <br><br>
180 :       <dl>
181 : 	<dt>int x,y
182 : 	<dd>¨÷?úğ????????????????¤õ?
183 : 	
184 : 	<dt>string direction
185 : 	<dd>???©˜? a,b,c,d,e,f,g,h?ıÍ??¨Á????¥h??
186 : 	    a?ş¢ıÆ(dx,dy)=(0,-1)???????? h??ıÆ(-1,-1)
187 : 	    A,B,C,D,E,F,G,H ???ıÍ?¤š????????ş¢ıÆ?
188 : 	    ?????????ıÆ?????ıÍ?? "ccae"???
189 : 	    §ó????ıï????ıÍ?????????"G"??ıï
190 : 	    ????????????1¨÷1§ó??¢n???????
191 : 	    ?§ó????????????
192 : 	    
193 :       </dl>
194 :       <br>
195 :       <br>
196 :       <hr>
197 :       <br>
*/

void old_lssproto_W_send( int fd,int x,int y,char* direction )
{
	lssproto_CreateHeader( lssproto.work , "W" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( direction ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
	// Nuke 0407
	SendCount--;
//	TNJ;
}
/*
198 :   <LI><a name="CS_W2"><font color=red>clienttoserver w( int x, int y, string direction);<br></font></a>
199 :       ?şo¤†????¡u?¥i?????????????????????¥h???¥›??
200 :       ??????¥‚???????????¨÷??MC?????????OK????ıÍ??
201 :       ??MC?¢¬??????¨÷???MC????????????¨÷?????w?????????
202 :       ?????ıï??ıÓ???????üÒ?????????????????? <a href="#CS_EV">CHAR_EVENT_ALTERRATIVE</a>
203 :       ???ıÍ?????????????????¨Á??????¦uşÍ??????¤G????????§Æ????????¨÷???
204 :       <br>
205 :       <br>
206 :       <hr>
207 :       <br>
208 :       
*/

void old_lssproto_w_send( int fd,int x,int y,char* direction )
{
	lssproto_CreateHeader( lssproto.work , "w" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( direction ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
212 :   <LI><a name="CS_EV"><font color=red>clienttoserver EV( int event,int seqno,int x, int y, int dir);<br></font></a>
213 : 	??????????????????¥_????§DşØ???
214 : 	?????¤e¤„??????????úé?????
215 : 	
216 :       <br><br>
217 :       <dl>
218 : 	<dt>int event
219 : 	<dd>?????ûï??char_base.h????????¤e???????<br>
220 : 	<pre>
221 : typedef enum
222 : {
223 : 	CHAR_EVENT_NONE,		?????§DşØ???
224 : 	CHAR_EVENT_NPC,			?¤eNPC???
225 : 	CHAR_EVENT_ENEMY,		?¤e¤„??????????
226 : 	CHAR_EVENT_WARP,		???????
227 : 	CHAR_EVENT_ALTERRATIVE,		??ş†???¨Á????????????????¥‚?????????
228 : 	CHAR_EVENTNUM,
229 : }CHAR_EVENT;
230 : 	    
231 : 	</pre>
232 : 	CHAR_EVENT_NPC?ıÍ???£O??NPC??????????????????
233 : 	???????EV????????????§R£e??ûê¡q?û¢?????????<br>
234 : 	<dt>int seqno
235 : 	<dd>??????????No?¢e?????????????¥T??????????????
236 : 	    ???????????????
237 : 	    ?????EV????¢n??úé??şĞ?şÍ?ûè????
238 : 	<dt>int x,y
239 : 	<dd>û«§Æ??£t
240 : 	<dt>int dir
241 : 	<dd>??????????û«§Æû«ş«??£t????????????ıÍ??£S??û«§Æû«ş«?¥i?ıÍ????-1?
242 :       </dl>
243 :       <br>
244 :       <br>
245 :       <hr>
246 :       <br>
*/

void old_lssproto_EV_send( int fd,int event,int seqno,int x,int y,int dir )
{
	lssproto_CreateHeader( lssproto.work , "EV" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( event ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( seqno ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( dir ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
261 :   <LI><a name="CS_EN"><font color=red>clienttoserver EN( int x, int y );<br></font></a>
262 : 	?????????¤e?????¤„?????????????ıï???
263 : 	??¨÷????????????ş°?????ıï??????????
264 :       <br><br>
265 :       <dl>
266 : 	<dt>int x,y
267 : 	<dd>??????????????????????¤õ?
268 :       </dl>
269 :       <br>
270 :       <br>
271 :       <hr>
272 :       <br>
*/

void old_lssproto_EN_send( int fd,int x,int y )
{
	lssproto_CreateHeader( lssproto.work , "EN" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
273 :   <LI><a name="CS_DU"><font color=red>clienttoserver DU( int x, int y);<br></font></a>
274 : 	????????????¥iúï????????????ıÍ???ıï???
275 : 	??¨÷????????????ş°?????ıï??????????
276 :       <br><br>
277 :       <dl>
278 : 	<dt>int x,y
279 : 	<dd>??????????????????????¤õ?
280 :       </dl>
281 :       <br>
282 :       <br>
283 :       <hr>
284 :       <br>
*/

void old_lssproto_DU_send( int fd,int x,int y )
{
	lssproto_CreateHeader( lssproto.work , "DU" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
298 :   <LI><a name="CS_EO"><font color=red>clienttoserver EO( int dummy );<br></font></a>
299 : 	????????????????ü¬?????????
300 :       <dl>
301 : 	<dt>int dummy
302 : 	<dd>???????????????
303 :       </dL>
304 :       <br>
305 :       <br>
306 :       <hr>
307 :       <br>
308 : 
*/

void old_lssproto_EO_send( int fd,int dummy )
{
	lssproto_CreateHeader( lssproto.work , "EO" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( dummy ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
309 :   <LI><a name="CS_BU"><font color=red>clienttoserver BU( int dummy );<br></font></a>
310 : 	???????????????£e???ıÍ?????
311 :       <dl>
312 : 	<dt>int dummy
313 : 	<dd>???????????????
314 :       </dL>
315 :       <br>
316 :       <br>
317 :       <hr>
318 :       <br>
319 : 
*/

void old_lssproto_BU_send( int fd,int dummy )
{
	lssproto_CreateHeader( lssproto.work , "BU" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( dummy ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
320 :   <LI><a name="CS_JB"><font color=red>clienttoserver JB( int x, int y );<br></font></a>
321 : 	¢\?¡P¥f?úÓ¡P???ıÍ?????ûº¦?şÎ?? EN ???¨ë??
322 :       <dl>
323 : 	<dt>int x, int y;
324 : 	<dd>???????????¤õ?
325 :       </dL>
326 :       <br>
327 :       <br>
328 :       <hr>
329 :       <br>
330 : 
*/

void old_lssproto_JB_send( int fd,int x,int y )
{
	lssproto_CreateHeader( lssproto.work , "JB" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
331 :   <LI><a name="CS_LB"><font color=red>clienttoserver LB( int x, int y );<br></font></a>
332 : 	¢\?¡P¥f??¡P???ıÍ?????ûº¦?şÎ?? EN ???¨ë??
333 :       <dl>
334 : 	<dt>int x, int y;
335 : 	<dd>???????????¤õ?
336 :       </dL>
337 :       <br>
338 :       <br>
339 :       <hr>
340 :       <br>
341 : 
*/

void old_lssproto_LB_send( int fd,int x,int y )
{
	lssproto_CreateHeader( lssproto.work , "LB" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
354 :   <LI><a name="CS_B"><font color=red>clienttoserver B( string command );<br></font></a>
355 :       ??????????????¡P¥f??????úù¤e???????ûê§k????????úù¤e????ş°?úù???????¢D???¡u¢l?úù¤e??????¢D???¡u¢l??????????¡u¢l?úù??<br><br>
356 : <ul>
357 : <li>H|?ûê§k?(%X)(0?19)<br>¤GıĞ????ûê?§k??úù¤e<br><br>
358 : <li>E<br>¥`???<br><br>
359 : <li>G<br>ş\??<br><br>
360 : <li>N<br>??????<br><br>
361 : <li>T|?ûê§k?(%X)<br>¨ö??<br><br>
362 : <li>J|ûöüÓ?§k?(%X)|?ûê§k?(%X)?
363 : 	<br>ûöüÓ?úé?????ûöüÓ?§k?????????ûöüÓ??§k??úù??
364 : 	???(0?5)?<br><br>
365 : <li>W|????§k?(%X)|?ûê§k?(%X)<br>
366 : 	?????úé????????????§k?????????§k??
367 : 	???(0?7)<br><br>
368 : <li>S|????§k?(%d)?<br>???üÒ?????????????<br><br>
369 : <li>I|?????§k?(%X)|?ûê§k?(%X)?
370 : 	<br>?????úé??????????§k???????????????§k??úù??
371 : 	???(5?19)?<br><br>
372 : </ul>
373 :       <br>
374 :       <br>
375 :       <br>
376 : 
*/

void old_lssproto_B_send( int fd,char* command )
{
	lssproto_CreateHeader( lssproto.work , "B" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( command ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
542 :   <LI><a name="SKD"><font color=red>clienttoserver SKD( int dir , int index );<br></font></a>
543 :       (SKillDir)
544 :       úù¤e??©˜??????????
545 :       <br><br>
546 :       <dl>
547 : 	<dt>int dir
548 : 	<dd>????úé?©˜?
549 : 	<dt>int index
550 : 	<dd>û«§Æ??????????¤ú??index.
551 :       </dl>
552 :       ???¤ú????¤G??????????????????§Æ????
553 :       <pre>
554 : 
555 :       ?????????????
556 :       rpcgen C???????????????????¤G??????
557 :       ?????????enum
558 : 
559 :       ???ş¡q?¤ˆ?????????şs???????
560 :       typedef enum
561 :       {
562 :       SKILL_FIRE,
563 :       SKILL_MAGICIAN,         ?©œúé?
564 :       SKILL_PRIEST,           öÓ?
565 :       SKILL_ALOTOFTHINGS,     ????
566 :                               ??©˜??
567 :                              7(?§) + 8 (?? ) + 4*(???????)
568 :       SKILL_AVOIDRATEUP,      ???????? 3% ?????
569 :       SKILL_DETERMINEITEM,    ????û±¨
570 : 
571 :       SKILL_DETERMINOTHERS,   ¡J??
572 :                              0 ??§R¤e???(Ô?)
573 :                              1 Ô??ıè???????????¦V??
574 :                                  ???????¦V???????ıè
575 :                              2 ?????
576 :                              3 NPC
577 :                              4 ????
578 :                              5 ¤„
579 : 
580 :       SKILL_FIRECUT,         ???  5 %
581 :       SKILL_THUNDERCUT,      ????  5 %
582 :       SKILL_ICECUT,          ¤ö??  5 %
583 :       SKILL_MERCHANT,        üåş° ??20% ??100% ?? 5%?????
584 :       SKILL_HEALER,          öÓ?
585 :                               ?????????§k?ıÆ?????????
586 :                               1 ¥€
587 :                               2 ???
588 :                               3 £œ?
589 :                               4 şğ?
590 :                               5 ??
591 :                               6 ??
592 :                               7 HP 1 ???
593 :                               8 HP ???????
594 :       ????¡u?
595 :       ş????????????
596 :       0  0
597 :       1 50
598 :       2 57
599 :       3 64
600 :       4 71
601 :       5 78
602 :       6 85
603 :       7 92
604 :       8 100
605 :       ?????????( 100 ??? )??£k??? 1 10 ????
606 :       ??? + ?????
607 :       0 0
608 :       1 1
609 :       2 2
610 :       3 3
611 :       4 4
612 :       5 5
613 :       6 6
614 :       7 7
615 :       8 8
616 : 
617 :       SKILL_FIST,             ¡‰ûê?§
618 :       SKILL_SWORD,            ??§
619 :       SKILL_AXE,              ??§
620 :       SKILL_SPEAR,            ??§
621 :       SKILL_BOW,              ??§
622 :       SKILL_CANE,             ıÔ?§
623 : 
624 :       SKILL_LARGEVOICE,       ¢†??şÜ   Lv 8
625 :                               ı½?????????? TK ?
626 :       SKILL_NUM
627 :       }SKILL_ID;
628 :       </pre>
629 :       <br>
630 :       <hr>
631 :       <br>
632 : 	
*/

void old_lssproto_SKD_send( int fd,int dir,int index )
{
	lssproto_CreateHeader( lssproto.work , "SKD" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( dir ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( index ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
633 :   <li><a name="CS_ID"><font color=red>clienttoserver ID( int x, int y, int haveitemindex,int toindex);<br></font></a>
634 :       (useItemDir)?????úé?????????ıÆ???????????????¨???????????úé??
635 :       ??????§Š?????
636 : 
637 :       
638 :       <dl>
639 : 	<dt>int x,y
640 : 	<dd> û«§Æ?x,y ?¤õ
641 : 	<dt>int haveitemindex
642 : 	<dd> ???????úé?????????ıÍ?????
643 : 	<dt>int toindex
644 : 	<dd> £M??????úé???????????????????index????????????????
645 : 	<pre>
646 : 	  û«§Æ    = 0
647 : 	  ???  = 1 ?5
648 : 	  ??    = 6 ?10 ?S N ?0?4?¢n??û«§Æû«ş«????????
649 : 	</pre>
650 : 	¢nı¾?¡u????§Æ????????ıÍ??-1??ıï???<br>
651 : 	<br>
652 :       </dl>
653 :       <br>
654 :       <br>
655 :       <hr>
656 :       <br>
657 :       
658 : 
659 :       
660 : 
661 :       
*/

void old_lssproto_ID_send( int fd,int x,int y,int haveitemindex,int toindex )
{
	lssproto_CreateHeader( lssproto.work , "ID" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( haveitemindex ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( toindex ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
662 :   <LI><a name="PI"><font color=red>clienttoserver PI( int x, int y,int dir );<br></font></a>
663 :       (PickupItem)
664 :       ?????ü¨??ü¨???¢K??????şü??9??????<br><br>
665 :       <dl>
666 : 	<dt>int x,y
667 : 	<dd> û«§Æ?x,y ?¤õ
668 : 	<dt>int dir
669 : 	<dd>ü¨?©˜????©˜???¢K????? ????¢K??????
670 :       </dl>
671 :       <br>
672 :       <hr>
673 :       <br>
674 : 
675 :       
*/

void old_lssproto_PI_send( int fd,int x,int y,int dir )
{
	lssproto_CreateHeader( lssproto.work , "PI" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( dir ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
676 :   <LI><a name="DI"><font color=red>clienttoserver DI( int x, int y, int itemindex);<br></font></a>
677 :       (DropItem)
678 :       ?????£t??£t???????????£t????©˜???£t?
679 :       úù¤e????itemindex??????£t??????û«§Æ?¡q?£t??
680 :       <br><br>
681 : 
682 :       <dl>
683 : 	<dt>int x,y
684 : 	<dd> û«§Æ?x,y ?¤õ
685 : 	<dt>int itemindex
686 : 	<dd>£t??????????????
687 :       </dl>
688 :       <br>
689 :       <hr>
690 :       <br>
691 : 
692 :       
*/

void old_lssproto_DI_send( int fd,int x,int y,int itemindex )
{
	lssproto_CreateHeader( lssproto.work , "DI" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( itemindex ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
693 :   <LI><a name="DG"><font color=red>clienttoserver DG( int x, int y, int amount );<br></font></a>
694 :       (DropGold)
695 :       ???£t??SA?????£t??¤õ?¤D??<br><br>
696 :       <dl>
697 : 	<dt>int x,y
698 : 	<dd> û«§Æ?x,y ?¤õ
699 : 	<dt>int amount
700 : 	<dd>£t??????
701 :       </dl>
702 :       <br>
703 :       <hr>
704 :       <br>
705 :   
*/

void old_lssproto_DG_send( int fd,int x,int y,int amount )
{
	lssproto_CreateHeader( lssproto.work , "DG" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( amount ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
706 :   <LI><a name="DP"><font color=red>clienttoserver DP( int x, int y,int petindex);<br></font></a>
707 :       (DropPet)
708 :       ????£t??©˜???£t?úù¤e????
709 :       petindex??????£t??????û«§Æ?¡q?£t??
710 :       <br><br>
711 : 
712 :       <dl>
713 : 	<dt>int x,y
714 : 	<dd> û«§Æ?x,y ?¤õ
715 : 	<dt>int petindex
716 : 	<dd>£t???????index????????§k????????????
717 :       </dl>
718 :       <br>
719 :       <hr>
720 :       <br>
721 : 
*/

void old_lssproto_DP_send( int fd,int x,int y,int petindex )
{
	lssproto_CreateHeader( lssproto.work , "DP" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( petindex ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
741 :   <LI><a name="MI"><font color=red>clienttoserver MI( int fromindex , int toindex);<br></font></a>
742 :       (MoveItem)<br>
743 :       ??????¥h/?§/?§??????§????????
744 :       ?¥h?ıÍ??????<br><br>
745 :       <dl>
746 : 	<dt>int fromindex
747 : 	<dd>?¥h?????????????
748 : 	<dt>int toindex
749 : 	<dd>?¤†Ô???????????
750 :       </dl>
751 :       ?¤†Ô?????¤G??
752 :       <ul>
753 : 	<li>0    ???§???( ¥d )
754 : 	<li>1    ???§???( ¢l )
755 : 	<li>2    ????????§???(ûê)
756 : 	<li>3    ?ıß¦¹??§???1
757 : 	<li>4    ?ıß¦¹??§???2
758 : 	<li>???ıÆ?   ?????
759 :       </ul>
760 :       <br>
761 :       <hr>
762 :       <br>
*/

void old_lssproto_MI_send( int fd,int fromindex,int toindex )
{
	lssproto_CreateHeader( lssproto.work , "MI" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( fromindex ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( toindex ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
788 :   <LI><a name="CS_MSG"><font color=red>clienttoserver MSG( int index , string  message , int color );<br></font></a>
789 :       (MeSsaGe)
790 :       ?????????ûê????????ıï?index?û«§Æ???????
791 :       ???????????<br><br>
792 :       <dl>
793 : 	<dt>int index
794 : 	<dd>???????????ûê???????
795 : 	<dt>string message
796 : 	<dd>?ûê??ıï????????EUC???????ıï?????§ó
797 : 	    ???????????????????????¢¬?????
798 : 	<dt>int color
799 : 	<dd>??????ıè?
800 :       </dl>
801 :       <br>
802 :       <br>
803 :       <hr>
804 :       <br>
805 : 
*/

void old_lssproto_MSG_send( int fd,int index,char* message,int color )
{
	lssproto_CreateHeader( lssproto.work , "MSG" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( index ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( message ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( color ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
830 :   <LI><a name="CS_PMSG"><font color=red>clienttoserver PMSG( int index, int petindex, int itemindex, string  message , int color );<br></font></a>
831 :       (PetMeSsaGe)
832 :       ?????????ûê????????????ıï?index?û«§Æ???????
833 :       ?????????????????ıï?????üÒ???<br><br>
834 :       <dl>
835 : 	<dt>int index
836 : 	<dd>???????????ûê???????
837 : 	<dt>int petindex
838 : 	<dd>?§k???????ıï???
839 : 	<dt>int itemindex
840 : 	<dd>?§k????????ıï????
841 : 	<dt>string message
842 : 	<dd>?ûê??ıï????????EUC???????ıï?????§ó
843 : 	    ???????????????????????¢¬?????
844 : 	<dt>int color
845 : 	<dd>??????ıè?
846 :       </dl>
847 :       <br>
848 :       <br>
849 :       <hr>
850 :       <br>
*/

void old_lssproto_PMSG_send( int fd,int index,int petindex,int itemindex,char* message,int color )
{
	lssproto_CreateHeader( lssproto.work , "PMSG" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( index ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( petindex ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( itemindex ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( message ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( color ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}

void old_lssproto_AB_send( int fd )
{
	lssproto_CreateHeader( lssproto.work , "AB" );
	lssproto_strcatsafe( lssproto.work , "" ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
921 :   <LI><a name="DAB"><font color=red>clienttoserver DAB( int index );</font></a><br>
922 :       (DeleteAddressBookitem)????????????????????
923 :       ??????????????¥›??¨Á???????????AB??
924 :       ????ıï??????????¤úû¨?????????????¥›?
925 :       ??ıø??¢¬?????
926 :       <dl>
927 : 	<dt>int index
928 : 	<dd>ı¤??????index.??????0????
929 :       </dl>
930 :       ???????????????¥{?¨ë??????????
931 :       <br>
932 :       <hr>
933 :       <br>
934 : 
*/

void old_lssproto_DAB_send( int fd,int index )
{
	lssproto_CreateHeader( lssproto.work , "DAB" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( index ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
935 :   <LI><a name="AAB"><font color=red>clienttoserver AAB( int x, int y );</font></a><br>
936 :       (AddAddressBookitem)
937 :       ??¡q??????????????????????
938 :       şÎ????????????¥›??¨Á??????
939 :       ?????AB??????ıï?????????¤úû¨??ıø???
940 :       <dl>
941 :         <dt>int x,y
942 :         <dd>û«§Æ?????¤õ
943 :       </dl>
944 :       <br>
945 :       <hr>
946 :       <br>
947 : 
*/

void old_lssproto_AAB_send( int fd,int x,int y )
{
	lssproto_CreateHeader( lssproto.work , "AAB" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
948 :   <LI><a name="L"><font color=red>clienttoserver L( int dir);</font></a><br>
949 :       (Look)
950 :       dir ?©˜????©˜?????????????£šşü???????§D
951 :       şØ???????????????¡M????????????????
952 :       ???????????????????????úé????????
953 :       ?????????????©??????????????§Y????
954 :       ??¡q?????(¥aş‘?NPC?????)??????¡q???NPC?¢n
955 :       ????????©˜©œ?¤n??????¤†??????????NPC?
956 :       ??¥h???????????§ó??????????£l??????
957 :       TK??????????ıï???
958 :       <br>
959 :       <hr>
960 :       <br>
961 :       
*/

void old_lssproto_L_send( int fd,int dir )
{
	lssproto_CreateHeader( lssproto.work , "L" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( dir ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
962 :   <LI><a name="C2STK"><font color=red>clienttoserver TK( int x, int y, string message ,int color, int area);<br></font></a>
963 :       (TalK)
964 :       ????????????ıï???¨ë?????<br><br>
965 :       <dl>
966 :         <dt>int x,y
967 :         <dd>û«§Æ?????¤õ
968 : 	<dt>string message
969 : 	<dd>string ?¥›??, "|" ?2???şú?????????????
970 : 	    ???§ó?????2????????¥›??¨Á?????2??
971 : 	    ??????<a href="#escaping">?????</a>??????
972 : 	    ?????????????????????
973 : 	    <ul>
974 : 	      <li>P??<br>
975 : 		  ¡I¥d?C§ó???"P"???ıÍ???????????¦V
976 : 		  ??????????????????????????
977 : 		  ???§ó???¡I¥d???????§ó????????
978 : 		  ??????ıï????????§ó???¡I¥d?"P"?
979 : 		  ?üÒ???şÜ????§R¤e????§ô???§d???ıï?
980 : 		  ???????TK??????????TK??????ıï?
981 : 		  ?§ó??????"P"?????????¦V???
982 : 		  <br>
983 : 		  §ó???¥›???£º
984 : 		  <pre>
985 : 		  "P|??????¤“????!!"
986 : 		  </pre>
987 : 		  <br>
988 : 		  ???????????ıï?????§ô???§d??úù¤e
989 : 		  ??????§????§ó???????????§R¤e?
990 : 		  ??§ó???¤ú??C????¤ú?????'!' ?¡u?§ó
991 : 		  ??¦V????ıÍ????????????'!'???§T
992 : 		  ????????????????¡u?§ó??§S?§ó??
993 : 		  ?????ıï????!?????????????ıõ?
994 : 		  ???§ô???§d??????
995 : 		  <table border>
996 : 		    <tr><td>"..."</td><td>?????????û«§Æ??
997 : 		    </td></tr>
998 : 		      
999 : 		  </table>
1000 : 	      </ul>
1001 : 	  <dt>int color
1002 : 	  <dd>§ó???ıè?
1003 : 	  <dt>int area
1004 : 	  <dd>??????§ô???§d?????úù¤e????
1005 : 	  
1006 : 	</dl>
1007 :       <br>
1008 :       <hr>
1009 :       <br>
1010 : 
*/

void old_lssproto_TK_send( int fd,int x,int y,char* message,int color,int area )
{
	lssproto_CreateHeader( lssproto.work , "TK" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( message ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( color ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( area ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1071 :   <LI><a name="CS_M"><font color=red>clienttoserver M(int fl , int x1 , int y1 , int x2, int y2 );<br></font></a>
1072 :       ????????????????¨ë??M????????????
1073 :       ?ıï???????MC???????????????????
1074 :       ¨÷???úÜ???????????û«§Æ????????????
1075 :       <dl>
1076 : 	<dt>int fl
1077 : 	<dd>???§k?
1078 : 	<dt>int x1
1079 : 	<dd>?ıÆX
1080 : 	<dt>int y1
1081 : 	<dd>?ıÆY
1082 : 	<dt>int x2
1083 : 	<dd>??X
1084 : 	<dt>int y2
1085 : 	<dd>??Y
1086 :       </dl>
1087 :       <br>
1088 :       <hr>
1089 :       <br>
1090 : 
*/

void old_lssproto_M_send( int fd,int fl,int x1,int y1,int x2,int y2 )
{
	lssproto_CreateHeader( lssproto.work , "M" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( fl ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x1 ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y1 ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x2 ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y2 ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1128 :   <LI><a name="C2SC"><font color=red>clienttoserver C( int index );<bR></font></a>
1129 :       ????ıÑ©??????????index CA ????????¨ë??
1130 :       C ?¨ë??????????????????¨ë?????
1131 :       <br>
1132 :       <hr>
1133 :       <br>
1134 : 
*/

void old_lssproto_C_send( int fd,int index )
{
	lssproto_CreateHeader( lssproto.work , "C" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( index ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1345 :   <LI><a name="CS_S"><font color=red>clienttoserver S( string category );<br></font></a>
1346 :       (Status)
1347 :       ???????????????
1348 :       <dl>
1349 : 	<dt>string category
1350 : 	<dd>???ıÑ©?????????????úù¤e?
1351 : 	    <ul>
1352 : 	      <LI>P ¡u?????
1353 : 	      <LI>C ?¤õ
1354 : 	      <LI>I ¡u????
1355 : 	      <LI>S ¡u???
1356 : 	      <LI>T ¡uı¯?
1357 : 	      <LI>M ?§Æ?????
1358 : 	      <li>E ????????
1359 : 	      <li>K0 - K4 ???????
1360 : 	      <li>D ID
1361 : 	    </ul>
1362 :       </dl>
1363 :       ????ıÑ©???????????????????ıï?úÓı©?
1364 :       ??§ó?????????????
1365 :       <br>
1366 :       <hr>
1367 :       <br>
1368 :       
*/

void old_lssproto_S_send( int fd,char* category )
{
	lssproto_CreateHeader( lssproto.work , "S" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( category ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1745 :   <li><a name="CS_FS"><font color=red>clienttoserver FS( int flg);<br></font></a>
1746 :       (FlgSet)???ûõ?¦V????DUEL£Ï£Ë?????????????şúê???????On/Off???<br><br>
1747 :       
1748 :       <dl>
1749 :         <dt>int flg
1750 :         <dd> 0 bit  0: ??Off                  1: ??On<br>
1751 :              ???ştúé??1 bit  0: ¡P¥f¥N?úÓ?off          1: ¡P¥f¥N?úÓ?On <br>
1752 :              2 bit  0: DUEL off                 1: DUEL On<br>
1753 :              3 bit  0: ?¤G????????     1: ????????????§Š??????<br>
1754 :              4 bit  0: şúê??OK               1: şúê???§r<br>
1755 :       </dl>
1756 :       <br>
1757 :       <br>
1758 :       <hr>
1759 :       <br>
*/

void old_lssproto_FS_send( int fd,int flg )
{
	lssproto_CreateHeader( lssproto.work , "FS" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( flg ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1774 :   <li><a name="CS_HL"><font color=red>clienttoserver HL( int flg);<br></font></a>
1775 :       (HeLp)???????¡@¤e??????ON?????¢\?ş°?¡P¥f?úÓ?????üÒ???<br><br>
1776 :       
1777 :       <dl>
1778 :         <dt>int flg
1779 :         <dd> 0: ??????Off                  1: ??????On<br>
1780 :       </dl>
1781 :       <br>
1782 :       <br>
1783 :       <hr>
1784 :       <br>
*/

void old_lssproto_HL_send( int fd,int flg )
{
	lssproto_CreateHeader( lssproto.work , "HL" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( flg ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1795 :   <li><a name="CS_PR"><font color=red>clienttoserver PR( int x, int y,int request);<br></font></a>
1796 :       (PartyRequest)???¦V?or?¢ ??????<br><br>
1797 :       
1798 :       <dl>
1799 : 	<dt>int x,y
1800 : 	<dd> û«§Æ?x,y ?¤õ
1801 :         <dt>int request
1802 :         <dd>0: ?¢??1: ???????
1803 :       </dl>
1804 :       <br>
1805 :       <br>
1806 :       <hr>
1807 :       <br>
*/

void old_lssproto_PR_send( int fd,int x,int y,int request )
{
	lssproto_CreateHeader( lssproto.work , "PR" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( request ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1824 :   <li><a name="CS_KS"><font color=red>clienttoserver KS( int petarray);<br></font></a>
1825 :       (Kyoryu Select)¡P¥f?üÒ?????¡k¢‘???<br><br>
1826 :       
1827 :       <dl>
1828 : 	<dt>int petarray
1829 : 	<dd>0 ? 4 ??????¡k???????????ıÍ??û¨?????????¡P¥f??????????????????-1?¦V???
1830 :       </dl>
1831 :       <br>
1832 :       <br>
1833 :       <hr>
1834 :       <br>
*/

void old_lssproto_KS_send( int fd,int petarray )
{
	lssproto_CreateHeader( lssproto.work , "KS" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( petarray ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1852 :   <li><a name="CS_AC"><font color=red>clienttoserver AC( int x, int y, int actionno);<br></font></a>
1853 :       (action)?¥W?????¤ú????<br><br>
1854 :       
1855 :       <dl>
1856 : 	<dt>int x,y
1857 : 	<dd> û«§Æ?x,y ?¤õ
1858 : 	<dt>int actionno
1859 : 	<dd>?????????????????ıï???????????ûõ????????ûş???????(CA)??ıï???
1860 : 	    ???????¢eşÉ??????????????????§k????????¢n?????¤G??<br>
1861 : 	<br>
1862 : 	  <table border=1>
1863 : 	    <tr><td>action</td><td>no</td></tr>
1864 : 	    <tr><td>??</td><td>0</td></tr>
1865 : 	    <tr><td>????</td><td>1</td></tr>
1866 : 	    <tr><td>¥X??</td><td>2</td></tr>
1867 : 	    <tr><td>?????</td><td>3</td></tr>
1868 : 	    <tr><td>¨÷?</td><td>4</td></tr>
1869 : 	    <tr><td>??</td><td>5</td></tr>
1870 : 	    <tr><td>ûê?ı÷?</td><td>6</td></tr>
1871 : 	    <tr><td>??</td><td>7</td></tr>
1872 : 	    <tr><td>¥W?</td><td>8</td></tr>
1873 : 	    <tr><td>§v??</td><td>9</td></tr>
1874 : 	    <tr><td>???</td><td>10</td></tr>
1875 : 	    <tr><td>????</td><td>11</td></tr>
1876 : 	    <tr><td>???</td><td>12</td></tr>
1877 : 	  </table>
1878 :       </dl>
1879 :       <br>
1880 :       <br>
1881 :       <hr>
1882 :       <br>
*/

void old_lssproto_AC_send( int fd,int x,int y,int actionno )
{
	lssproto_CreateHeader( lssproto.work , "AC" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( actionno ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1883 :   <li><a name="CS_MU"><font color=red>clienttoserver MU( int x, int y, int array, int toindex);<br></font></a>
1884 :       (magic use)?©œ?úé?????????ıÆ???????????????¨????????©œúé??
1885 :       ??????§Š?????
1886 : 
1887 :       
1888 :       <dl>
1889 : 	<dt>int x,y
1890 : 	<dd> û«§Æ?x,y ?¤õ
1891 : 	<dt>int array
1892 : 	<dd> ???©œ?úé????????? P ? Jn(n ?¦\????)?¢n???????????
1893 : 	<dt>int toindex
1894 : 	<dd> £M??©œ?úé???????????????????index????????????????
1895 : 	<pre>
1896 : 	  û«§Æ    = 0
1897 : 	  ???  = 1 ?5
1898 : 	  ??    = 6 ?10 ?S N ?0?4?¢n??û«§Æû«ş«????????
1899 : 	</pre>
1900 : 	¢nı¾?¡u????§Æ????????ıÍ??-1??ıï???<br>
1901 : 	<br>
1902 :       </dl>
1903 :       <br>
1904 :       <br>
1905 :       <hr>
1906 :       <br>
*/

void old_lssproto_MU_send( int fd,int x,int y,int array,int toindex )
{
	lssproto_CreateHeader( lssproto.work , "MU" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( array ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( toindex ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1907 :   <li><a name="CS_PS"><font color=red>clienttoserver PS( int havepetindex, int havepetskill, int toindex, string data);<br></font></a>
1908 :       (PetSkill use )??????úé???????ıÆ??????????
1909 :       
1910 :       <dl>
1911 :         <dt>int havepetindex
1912 :         <dd>?§k??????úé?????
1913 :         <dt>int havepetskill
1914 :         <dd>?§k????úé?????
1915 : 	<dt>int toindex
1916 : 	<dd> £M??©œ?úé???????????????????index????????????????
1917 : 	<pre>
1918 : 	  û«§Æ    = 0
1919 : 	  ???  = 1 ?5
1920 : 	  ??    = 6 ?10 ?S N ?0?4?¢n??û«§Æû«ş«????????
1921 : 	</pre>
1922 : 	¢nı¾?¡u????§Æ????????ıÍ??-1??ıï???<br>
1923 : 	<br>
1924 :       	<dt>string data
1925 :       	<dd>¦Ü?ıÑ©??????şÎ???ıÍ???haveitemindex1|haveitemindex2|haveitemindex3|...<br>
1926 :       	    ???şÎ???????§k??¦V?????
1927 :       	    
1928 :       </dl>
1929 :       
1930 :       <br>
1931 :       <br>
1932 :       <hr>
1933 :       <br>
1934 : 
*/

void old_lssproto_PS_send( int fd,int havepetindex,int havepetskill,int toindex,char* data )
{
	lssproto_CreateHeader( lssproto.work , "PS" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( havepetindex ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( havepetskill ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( toindex ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( data ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1963 :   <LI><a name="ST"><font color=red>clienttoserver ST( int titleindex );<br></font></a>
1964 :       (SelectTitle)
1965 :       ı¯??????titleindex ? -1 ????ı¯???????????
1966 :       ??<br><br>
1967 :       <dl>
1968 : 	<dt>int titleindex
1969 : 	<dd>?§k??ı¯???
1970 :       </dl>
1971 :       ????Txt??????????????????????????
1972 :       ?¤G£l????
1973 :       <br>
1974 :       <br>
1975 :       <hr>
1976 :       <br>
1977 : 
1978 :       
*/

void old_lssproto_ST_send( int fd,int titleindex )
{
	lssproto_CreateHeader( lssproto.work , "ST" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( titleindex ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1979 :   <LI><a name="DT"><font color=red>clienttoserver DT( int titleindex );<br></font></a>
1980 :       (DeleteTitle)
1981 :       ı¯???????<br><br>
1982 :       <dl>
1983 : 	<dt>int titleindex
1984 : 	<dd>????ı¯????????
1985 :       </dl>
1986 :       ????Txt?????????????????????????????¤G
1987 :       £l????
1988 :       <br>
1989 :       <br>
1990 :       <hr>
1991 :       <br>
1992 : 
*/

void old_lssproto_DT_send( int fd,int titleindex )
{
	lssproto_CreateHeader( lssproto.work , "DT" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( titleindex ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
1993 :   <LI><a name="FT"><font color=red>clienttoserver FT( string data );<br></font></a>
1994 :       (inputFreeTitle)
1995 :       û«§Æ?¦V???ı¯??¦V????<br><br>
1996 :       <dl>
1997 : 	<dt>string data
1998 : 	<dd>û«§Æ?¦V???ı¯??EUC???????ıï??????ı¯???
1999 : 	    ????????????????ş??1?info?¤úû¨??
2000 : 	    ?????????§ó????????????????
2001 : 	    ???????¢¬?????
2002 :       </dl>
2003 :       ??????Txt???úé???§ó???¤G£l????????????
2004 :       û«§Æ?CHARINDEX?¢n???Ch?????????ıï????????
2005 :       ???
2006 :       <br>
2007 :       <br>
2008 :       <hr>
2009 :       <br>
2010 : 
*/

void old_lssproto_FT_send( int fd,char* data )
{
	lssproto_CreateHeader( lssproto.work , "FT" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( data ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
2019 :   <LI><a name="C2SSKUP"><font color=red>clienttoserver SKUP( int skillid );<br></font></a>
2020 :       (SKillUP)
2021 :       ??????????????<br><br>
2022 :       <dl>
2023 : 	<dt>int skillid
2024 : 	<dd>???????????0=¢l?, 1=??, 2=ıÇ¦Ş?, 3=¡‰??
2025 :       </dl>
2026 :       <br>
2027 :       <hr>
2028 :       <br>
2029 : 
*/

void old_lssproto_SKUP_send( int fd,int skillid )
{
	lssproto_CreateHeader( lssproto.work , "SKUP" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( skillid ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
2030 :   <LI><a name="CS_KN"><font color=red>clienttoserver KN( int havepetindex, string data );<br></font></a>
2031 :       (inputKyoryuName)
2032 :       ????ş¡q?¦V????<br><br>
2033 :       <dl>
2034 : 	<dt>int havepetindex
2035 : 	<dd>????§k??
2036 : 	<dt>string data
2037 : 	<dd>û«§Æ???????????ş¡q?????
2038 : 	
2039 :       </dl>
2040 :       ??????Txt???úé???§ó???¤G£l????????????
2041 :       ???????????????????
2042 :       <br>
2043 :       <br>
2044 :       <hr>
2045 :       <br>
2046 : 
*/

void old_lssproto_KN_send( int fd,int havepetindex,char* data )
{
	lssproto_CreateHeader( lssproto.work , "KN" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( havepetindex ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( data ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
2166 :   <LI><a name="CS_WN"><font color=red>clienttoserver WN( int x, int y, int seqno, int objindex, int select, string data );<br></font></a>
2167 :       <br>
2168 :       ?????¤úû¨?¢n??¨ë?<br>
2169 :       <br>
2170 :       <dl>
2171 :         <dt>int x,y
2172 :         <dd>???????x,y?¤õ
2173 :         <dt>int seqno
2174 :         <dd>????????seqno?????¨ë?
2175 :         <dt>int objindex
2176 :         <dd>????????objindex?????¨ë?
2177 :         <dt>int select
2178 :         <dd>??????¡k¢‘????????¡k¢‘?????????WN ?buttontype ?define?¥i??û°?¨ë??
2179 :         <dt>string data
2180 :         <dd>??¦V?????????????¦V???????
2181 :             ¡k¢‘??????ıÍ?????¡k¢‘??§k???1???
2182 :             ?????????¡k¢‘???????????????????????????
2183 :             <br><br>??¤•?ıÍ??<br>
2184 :             	????£º¡k¢‘??§k??????????<br>
2185 :             	????£º¡k¢‘????????§k??????|??<br>
2186 :       		??¢\	£º??£º1  ??£º2  üÒ?£º3
2187 : 
2188 :             <br><br><br>???????ıÍ??<br>
2189 : 		??????????(¡k¢‘§k?)????????(¡k¢‘§k?)?????????(¡k¢‘§k?)?£k£h<br>
2190 : 
2191 :       </dl>
2192 :       <br>
2193 :       <br>
2194 :       <hr>
2195 :       <br>
*/

void old_lssproto_WN_send( int fd,int x,int y,int seqno,int objindex,int select,char* data )
{
	lssproto_CreateHeader( lssproto.work , "WN" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( seqno ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( objindex ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( select ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( data ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
2238 :   <LI><a name="CS_SP"><font color=red>clienttoserver SP( int x, int y, int dir );<br></font></a>
2239 :       (SetPosition)<br>
2240 :       	???????û«§Æ?ıÍ??©????
2241 :       	?????????????¤õ??ıø???<br>
2242 :       <br>
2243 :       <dl>
2244 :         <dt>int x,y, dir
2245 :         <dd>?¤õ,???
2246 :       </dl>
2247 :       <br>
2248 :       <br>
2249 :       <hr>
2250 :       <br>
2251 :       <!-- ??????????şÎ?????????   -->
2252 : 	  
*/

void old_lssproto_SP_send( int fd,int x,int y,int dir )
{
	lssproto_CreateHeader( lssproto.work , "SP" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( x ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( y ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( dir ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}

/*
2253 :   <LI><a name="CS_CLIENTLOGIN"><font color=red>clienttoserver ClientLogin(string cdkey,string passwd);<br></font></a>
2254 :       ?????????????????????úé??????????
2255 :       ????????????????¥›???????ûï???????
2256 :       ?????????????ûÂ??????????????????
2257 :       ???£O????????ıÑ©??????????????????
2258 :       §Ä????????????¨Á??????¥T?????????
2259 :       
2260 :       <br><br>
2261 :       <dl>
2262 : 	<dt>string cdkey
2263 : 	<dd>CDKEY
2264 : 	<dt>string passwd
2265 : 	<dd>????????§ó?????????????
2266 :       </dl>
2267 :       <br>
2268 :       <hr>
2269 :       <br>
2270 :       
*/

void old_lssproto_ClientLogin_send( int fd,char* cdkey,char* passwd )
{
	lssproto_CreateHeader( lssproto.work , "ClientLogin" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( cdkey ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( passwd ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
2284 :   <LI><a name="CS_CREATENEWCHAR"><font color=red>clienttoserver CreateNewChar(int dataplacenum, string charname,int imgno , int faceimgno, int vital, int str, int tgh, int dex, int earth, int water, int fire, int wind, int hometown);<br></font></a>
2285 :       ıø????????????
2286 :       <br><br>       
2287 :       <dl>
2288 :         <dt>int dataplacenum
2289 :         <dd>????§k???????????????????????????ıÍ????????¤úû¨???????§R£e???
2290 : 	<dt>string charname
2291 : 	<dd>???ş(??????????????§ó??)?
2292 : 	    ??§ó????????úé?????????????¢¬?????
2293 : 	<dt>int imgno
2294 : 	<dd>?????????§k??
2295 : 	<dt>int faceimgno
2296 : 	<dd>????§k??şúê????úé?????
2297 : 	<dt>int vital, str,tgh dex
2298 : 	<dd>???????
2299 : 	<dt>int earth, water, fire, wind
2300 : 	<dd>?¢NşÍ£k
2301 : 	<dt>int hometown
2302 : 	<dd>üÒş«Ô?0???£k?¥J????
2303 : 	<dt>string option
2304 : 	</table>
2305 : 	???????¥›?¤†??????şÎ??úù¤e?????????£k
2306 : 	???????????úæ???úÓı©???????§ó???????
2307 : 	?????
2308 :       </dl>
2309 :       <br>
2310 :       <hr>
2311 :       <br>
2312 : 
2313 :       
*/

void old_lssproto_CreateNewChar_send( int fd,int dataplacenum,char* charname,int imgno,int faceimgno,int vital,int str,int tgh,int dex,int earth,int water,int fire,int wind,int hometown )
{
	//cary
	if(imgno>=100239)
		return;
	//end
	lssproto_CreateHeader( lssproto.work , "CreateNewChar" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( dataplacenum ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( charname ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( imgno ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( faceimgno ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( vital ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( str ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( tgh ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( dex ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( earth ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( water ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( fire ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( wind ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( hometown ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}
/*
2338 :   <LI><a name="CS_CHARDELETE"><font color=red>clienttoserver CharDelete(string charname);<br></font></a>
2339 :       ????ı¤??
2340 :       <br><br>
2341 :       <dl>
2342 : 	<dt>string charname
2343 : 	<dd>???ş??????????????????????
2344 :       </dl>
2345 :       <br>
2346 :       <br>
2347 :       <hr>
2348 :       <br>
*/

void old_lssproto_CharDelete_send( int fd,char* charname )
{
	lssproto_CreateHeader( lssproto.work , "CharDelete" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( charname ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}
/*
2366 :   <LI><a name="CS_CHARLOGIN"><font color=red>clienttoserver CharLogin(string charname);<br></font></a>
2367 :       ?????????????????????úé??
2368 :       <br><br>
2369 :       <dl>
2370 : 	<dt>string charname
2371 : 	<dd>???ş???????????????????????
2372 :       </dl>
2373 :       <br>
2374 :       <hr>
2375 :       <br>
*/

void old_lssproto_CharLogin_send( int fd,char* charname )
{
	lssproto_CreateHeader( lssproto.work , "CharLogin" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( charname ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}
/*
2391 :   <LI><a name="CS_CHARLIST"><font color=red>clienttoserver CharList( void );<br></font></a>
2392 :       ???????¥x??
2393 :       <br><br>
2394 :       <hr>
2395 :       <br>
*/

void old_lssproto_CharList_send( int fd )
{
	lssproto_CreateHeader( lssproto.work , "CharList" );
	lssproto_strcatsafe( lssproto.work , "" ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
//	TNJ;
}
/*
2438 :   <LI><a name="CS_CHARLOGOUT"><font color=red>clienttoserver CharLogout(void);<br></font></a>
2439 :       ???????????????????????úé??
2440 :       ?????
2441 :       <br>
2442 :       <hr>
2443 :       <br>
2444 :       
*/

void old_lssproto_CharLogout_send( int fd )
{
	lssproto_CreateHeader( lssproto.work , "CharLogout" );
	lssproto_strcatsafe( lssproto.work , "" ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}


/*
2459 :   <LI><a name="CS_PROCGET"><font color=red>clienttoserver ProcGet(void);<br></font></a>
2460 :       proc ????ûè¥x?????????????ş°??£???????üÒ???
2461 :       <br>
2462 :       <hr>
2463 :       <br>
2464 :       
*/

void old_lssproto_ProcGet_send( int fd )
{
	lssproto_CreateHeader( lssproto.work , "ProcGet" );
	lssproto_strcatsafe( lssproto.work , "" ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}
/*
2477 :   <LI><a name="CS_PLAYERNUMGET"><font color=red>clienttoserver PlayerNumGet(void);<br></font></a>
2478 :       ??????????ş°??ûè¥x???
2479 :       <br>
2480 :       <hr>
2481 :       <br>
2482 :       
*/

void old_lssproto_PlayerNumGet_send( int fd )
{
	lssproto_CreateHeader( lssproto.work , "PlayerNumGet" );
	lssproto_strcatsafe( lssproto.work , "" ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}
/*
2495 :   <LI><a name="CS_ECHO"><font color=red>clienttoserver Echo( string test);<br></font></a>
2496 :       ?????şØ??????????????????úé??
2497 :       <br><br>
2498 :       <dl>
2499 : 	<dt>string test
2500 : 	<dd>????§ó????????????
2501 :       </dl>
2502 :       <br>
2503 :       <hr>
2504 :       <br>
2505 :       
*/

void old_lssproto_Echo_send( int fd,char* test )
{
	lssproto_CreateHeader( lssproto.work , "Echo" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( test ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}
/*
2517 :   <LI><a name="CS_SHUTDOWN"><font color=red>clienttoserver Shutdown( string passwd, int min);<br></font></a>
2518 :       ??????????úğ?ıï<br><br>
2519 :       ??????????????û«¥h¤†?????§Æ?????????????????????§Æ??
2520 :       ??????????denyaccept()???????????????üÒ??????
2521 :       ???closeallsockets()?????????????şÉ?????????
2522 :       <br><br>
2523 :       <dl>
2524 : 	<dt>string passwd
2525 : 	<dd>???????????????????¡@¤e?????
2526 : 	<dt>int min
2527 : 	<dd>????§Æ???????????????§Æ?¡@¤e???
2528 :       </dl>
2529 :       <br>
2530 :       <hr>
2531 :       <br>
2532 : 
*/

void old_lssproto_Shutdown_send( int fd,char* passwd,int min )
{
	lssproto_CreateHeader( lssproto.work , "Shutdown" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( passwd ) ,lssproto.workbufsize );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_int( min ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}

// Robin 2001/04/10 trade
void old_lssproto_TD_send( int fd,char* message )
{
	lssproto_CreateHeader( lssproto.work , "TD" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( message ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}

void old_lssproto_FM_send( int fd,char* message )
{
	lssproto_CreateHeader( lssproto.work , "FM" );
	lssproto_strcatsafe( lssproto.work , lssproto_mkstr_string( message ) ,lssproto.workbufsize );
	lssproto_Send( fd , lssproto.work );
}

int lssproto_ClientDispatchMessage(int fd ,char*line)
{
	int msgid;
	char funcname[1024];
	lssproto_strcpysafe( lssproto.work , line,lssproto.workbufsize );
	lssproto_splitString( lssproto.work);
	lssproto_GetMessageInfo( &msgid , funcname , sizeof(funcname),lssproto.token_list);
/*
209 :   <LI><a name="SC_XYD"><font color=blue>servertoclient XYD( int x, int y, int dir );<br></font></a>
210 : 	ûç?¡P¥fü¬??????????£t?§£şĞ?????úé??
211 :       <br><br>
*/

	if( strcmp( funcname , "XYD" ) == 0 ){
		int x;
		int y;
		int dir;
		x = lssproto_demkstr_int( lssproto.token_list[2] );
		y = lssproto_demkstr_int( lssproto.token_list[3] );
		dir = lssproto_demkstr_int( lssproto.token_list[4] );
		lssproto_XYD_recv( fd,x,y,dir);
		return 0;
	}
/*
247 :   <LI><a name="SC_EV"><font color=blue>servertoclient EV(int seqno,int result);<br></font></a>
248 : 	???????EV?¢n???¨ë?????
249 : 	???ûõ?ûè????????????¨÷????????
250 : 	üÒ????
251 :       
252 :       <dl>
253 : 	<dt>int seqno
254 : 	<dd>??????EV?seqno?¢n????
255 : 	<dt>int result
256 : 	<dd>???0:????ûÂ?¦Û?? 1:şÎ??????ıè???????¢n??¤Gıï???????????????
257 :       </dL>	
258 :       <br>
259 :       <hr>
260 :       <br>
*/

	if( strcmp( funcname , "EV" ) == 0 ){
		int seqno;
		int result;
		seqno = lssproto_demkstr_int( lssproto.token_list[2] );
		result = lssproto_demkstr_int( lssproto.token_list[3] );
		lssproto_EV_recv( fd,seqno,result);
		return 0;
	}
/*
285 :   <LI><a name="SC_EN"><font color=blue>servertoclient EN(int result,int field);<br></font></a>
286 : 	???????EN??DU?¢n???¨ë???????????¨÷???ş©?????????ıÍ?????????
287 :       
288 :       <dl>
289 : 	<dt>int result
290 : 	<dd>???0:??????¦Û?or???? 1:¤„??¡P¥f£Ï£Ë?2:¢nş°??¡P¥f£Ï£Ë?????¡P¥f????¤Gıï	???????????????
291 : 	<dt>int field
292 : 	<dd>????????§k??
293 :      </dL>
294 :       <br>
295 :       <hr>
296 :       <br>
297 : 
*/

	if( strcmp( funcname , "EN" ) == 0 ){
		int result;
		int field;
		result = lssproto_demkstr_int( lssproto.token_list[2] );
		field = lssproto_demkstr_int( lssproto.token_list[3] );
		lssproto_EN_recv( fd,result,field);
		return 0;
	}
/*
342 :   <LI><a name="SC_RS"><font color=blue>servertoclient RS( string data );<br></font></a>
343 : 	¡P¥fü¬???ûè¥x????????????¤G£l?<br>
344 :         RS|§k?(10ş­)|?????????(10ş­)|EXP(62ş­),§k?|?????????|EXP,???,????ş|????ş|????ş<br><br>
345 :         §k????£k?5ş°§Æ??ş°§Æ??şú??","?????ş°???¢¬???????????????§k??-2?<br>
346 : 	2ş°???4ş°????????§k??0?4)??????£k????????ıÍ?????ş†??????","????<br>
347 : 	????????ş¡q?"|"??şú???????¢†???ş†???ıÍ???????"|"????
348 : 
*/

	if( strcmp( funcname , "RS" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_RS_recv( fd,data);
		return 0;
	}
/*
349 :   <LI><a name="SC_RD"><font color=blue>servertoclient RD( string data );<br></font></a>
350 : 	????ü¬???ûè¥x??ûº???????????¤G£l?<br>
351 :         RD|¥x?(ûº??)DP(62ş­)|?ü¬¤†?DP(62ş­)|<br><br>
352 : 
353 : 
*/

	if( strcmp( funcname , "RD" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_RD_recv( fd,data);
		return 0;
	}
/*
377 :   <LI><a name="SC_B"><font color=blue>servertoclient B( string command );<br></font></a>
378 : ¡P¥f???????¡u?????£k??¡u? ¢†§ó?16ş­?úé??<BR>
379 : ???[?ûê§k?]????????????§k?????
380 : ûê¡q??????????ûê¡q???????????¢D??????????
381 : 	<br><br>
382 : <h4>
383 : ???????
384 : </h4>
385 : ????????§Æ?¡u??????§ó?????????§ó?????©˜?<BR>
386 : ???( BATTLESTR_ADD( §ó?? ) )?úé????????????§ó?????ü¬??????????????¤š????<BR>
387 : ????????????¡u??£k????????£k???ş†????üí§ó????ş†?(???????úé????)<br>
388 : 
389 : <BR>
390 : ???????????şs£º????????<BR>
391 : ---?????£º?ı÷?<BR>
392 : ---?????£º¤GıĞ???<BR>
393 : ---?????£º?ıõ???<BR>
394 : ---?????£ºş\?<BR>
395 : ---?????£º?????<BR>
396 : ---?????£º???<BR>
397 : ---?????£º????????????<BR>
398 : ---?????£º????????????<BR>
399 : ---?????£º???????????<BR>
400 : ---?????£ºûé?ûÔ???<BR>
401 : <br>
402 : <ul>
403 : <li>BH|????¤GıĞ??????<br>
404 : BH|??¢D§k?|ûé§¢D§k?|???|????|ûé§¢D§k?|???|????|???????¨ë??ûé§¢D§k??FF???????????ü¬??????<br>
405 : <br>
406 : 
407 : (¤GıĞ???) B|BH|attack_0|defense_A|flag_2|damage_32|defense_B|flag_2|damage_32|FF|<BR>
408 : ???0§k?(attack_0)A§k(defense_A)?0x32???????(damage_32)???B§k(defense_B)????????0x32????(damage_32)??????????<Br><Br>
409 : 
410 : (???????) B|BH|attack_0|defense_A|flag_2|dagame_32|counter_0|flag_10|damage_16|FF|<BR>
411 : ???0§k?(attack_0)?A§k????(defense_A)????0x32(damage_32)???????0§k(counter_0)???????(flag_10)????0x16(damage_16)?ıê????????????????§D¥h??????£š¡q?????????¡k????<Br><br>
412 : 
413 : (ûé?ûÔ????) B|BH|attack_0|defense_A|flag_202|dagame_32|gardian_B|FF|<BR>
414 : ???0§k?(attack_0)?A§k????(defense_A)????0x32(damage_32)?????????B§k?ûé?ûÔ??????????????????<Br><Br>
415 : <Br>
416 : 
417 : <li>BT|????¤„¨ö?????<br>
418 : BT|??¢D§k?|ûé§¢D§k?|???|<br>
419 : ?????????¨ö?şÎ???????¨ö?ûº¦?ûº¦?????????¤„?
420 : ??£??????????????????§R¤e???<br><br>
421 : 
422 : <li>BE|????¥`©û????<br>
423 : BE|¥`??¢D§k?|ûé§¢D§k?|???|<br>
424 : ?????????¨ö?şÎ???????¨ö?ûº¦?ûº¦?????????¤„?
425 : ??£??????????????????§R¤e????????????¥`??
426 : ıÍ???????BE?ş†??????¥`????????<br>
427 : <br>
428 : 
429 : <li>bg|???????????<br>
430 : bg|?????¢D§k?|<br>
431 : ???üí§ó?????????????¥h??ş†?????????¨???§ó???????????????????üí§ó??
432 : ??????????????????<br>
433 : <br>
434 : 
435 : <li>BD|?????????¨Á?????<br>
436 : BD|¨Á???????§k?|¨Á??ûï?|?????????|??£k|<br>
437 : ¨Á??ûï?????????????????????????????????<br>
438 : <br>
439 : 
440 : <li>BF|??????????????????<br>
441 : BF|??????§k?|<br>
442 : ??????úé?????????????????¦‘?????????????
443 : ?üÒ????Ô??ü·??úé?<br>
444 : <br>
445 : 
446 : <li>BJ|????ûöüÓ??????üÒ????<br>
447 : BJ|ûöüÓúé????§k?|ûöüÓúé?¢D?????§k?|ûöüÓûõ?¢D?????§k?|ûõ?????§k?|ûõ?????§k?|???|FF|<br>
448 : ?????ûöüÓ?úé???ıÍ??úé?????ûõ?????§k???¢Q???üÔ???????FF?????
449 : <br>
450 : <br>
451 : 
452 : <li>BB|????§Š?¥s???????<br>
453 : BB|??¢D§k?|§Š?¥s??ûï?|ûé§¢D§k?|???|????|ûé§¢D§k?|???|FF|<BR>
454 : ?§k?????§Š?¥s??ûï??¦V????¥›??¤GıĞ???¥i??<br>
455 : §Š?¥s??ûï???????????ş???£“??????????ş???¦„??????<br>
456 : 
457 : <br>
458 : <li>BM|??????????ıĞ¨Á?????<br>
459 : BM|?????¨Á??????§k?|????????ıĞ?|<br>
460 : ??????ıĞ§k??<br>
461 : ---?£º??????ıĞş†?<br>
462 : ---?£º¥€<br>
463 : ---?£º??<br>
464 : ---?£ºşƒ?<br>
465 : ---?£ºşğ?<br>
466 : ---?£º??¦ş?<br>
467 : ---?£º??<br>
468 : <br>
469 : 
470 : <li>BO|?????????????<br>
471 : BO|??¢D§k?|ûé§¢D§k?|???|????|ûé§¢D§k?|???|FF|<BR>
472 : ?§k?????§Š?¥s??ûï??¦V????¥›??¤GıĞ???¥i??<br>
473 : <br>
474 : 
475 : <li>BS|???????üÒ?¦V?????<br>
476 : BS|????§k?[0?19](%X)|???|??§k?|???|??|ş¡q|<BR>
477 : ???????????????????????????§ó??ş†????<br>
478 : ???????????üÒ??????????????ıÍ???????üÒ?????????BS??????????<br>
479 : 
480 : <li>BU|????¡P¥f??§I??????<br>
481 : ??ş†?????????????????????ıÖ¢t??ıĞ?£w????????¢r????????ıÍ??????????????¡P¥f??§I?????????????ıï????<br>
482 : <br>
483 : 
484 : <li>BV|?????????¢NşÍ¨Á?????<br>
485 : BV|¨Á????????§k?|¨Á???¢NşÍ§k?|<br>
486 : ¨Á???¢NşÍ§k???<br>
487 : ---?£ºş†¢NşÍ<br>
488 : ---?£ºÔ¢NşÍ<br>
489 : ---?£º?¢NşÍ<br>
490 : ---?£º?¢NşÍ<br>
491 : ---?£º?¢NşÍ<br>
492 : <br>
493 : 
494 : <li>BY|?????¢l??????<br>
495 : BY|ûé§¢D§k?|??¢D§k?|???|????|??¢D§k?|???|????|???????¨ë??¤GıĞ????ûé?¦V?¢v?????<br>
496 : <br>
497 : </ul>
498 : 
499 : <h4>
500 : ??????????????
501 : </h4>
502 : <ul>
503 : <li>BC|?????????????????????¡u??¥i?????????<br>
504 : BC|§k?[0?19](%X)|???ş(%s)|??§k?(%X)|???(%X)|HP(%X)|???(%X)|???<BR><BR>
505 : ?????şs£º????????<BR>
506 : ---?????£ºıø?úÓ?<BR>
507 : ---?????£º?©û<BR>
508 : ---?????£º?????????<BR>
509 : ---?????£º¥€<BR>
510 : ---?????£º??<BR>
511 : ---?????£ºşƒ?<BR>
512 : ---?????£ºşğ?<BR>
513 : ---?????£º??¦ş?<BR>
514 : ---?????£º??<BR>
515 : <br>
516 : <li>BP|????û«§Æ??ş°???????????şoş°????????<br>
517 : BP|û«§Æ?§k?[0?19](%X)|???(%X)|?????(%X)|???<BR><BR>
518 : ?????şs£º????????<BR>
519 : ---?????£ºû«§Æ?ıø?úÓ?<BR>
520 : ---?????£ºû«§Æ?¦Û?¢e??ıê?????<BR>
521 : ---?????£º????????????<BR>
522 : </ul>
523 : <h4>
524 : ?????????¤e???????????????????
525 : </h4>
526 : <ul>
527 : <li>BA|??????????????????????£M??????????????????¡u???????<br>
528 : BA|?????????(%X)|????(%X)|
529 : <BR><BR>
530 : ?????????????£O???şÎ???§k?????????????????
531 : ?????????????????????????????????????
532 : ??????????????????????????¤_û¢??????????????????¨???<BR>
533 : ??????????¡u??úğ??????ıÍ??????????????
534 : ??úğ???üØ?????????????
535 : </ul>
536 :       <br>
537 :       <br>
538 :       <hr>
539 :       <br>
540 : 
541 : 
*/

	if( strcmp( funcname , "B" ) == 0 ){
		char* command;
		command = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_B_recv( fd,command);
		return 0;
	}
/*
722 :   <LI><a name="SC_I"><font color=blue>servertoclient I( string data );<br></font></a>
723 :       (item)<br>
724 :       <br>
725 :       ????ıÑ©?S I ?¡u??????ıï????¢n?????úù¤e???????§k???????
726 :       ¦ú???ıï?????üÒ???
727 :       
728 :       <dl>
729 :         <dt>string data
730 :         <dd>????ıÑ©?
731 :             ?????¥›?????©˜©œ???????
732 : 	    ???????????????????????
733 : 	    ?ıï?????????S I???????¥i????¡I¥d???????????ıÍ??
734 : 	    ¦Ü?????????????§k????????§R£e???<br>
735 :         </dl>
736 :       <br>
737 :       <hr>
738 :       <br>
739 :       <br>
740 : 
*/

	if( strcmp( funcname , "I" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_I_recv( fd,data);
		return 0;
	}
/*
763 :   <LI><a name="SI"><font color=blue>servertoclient SI( int fromindex, int toindex );</font><br>
764 : 	  (SwapItem)
765 : 	  ??????????????ıÆ??şs?MI?¥i????
766 : 	  ??????????????¤G£l??????????
767 : 	  úé????¤†?????SI???????ûê??????
768 : 	  ıÖ??¨Á??????(¤‘?¤†????§?¨Á?????)??
769 : 	  ???????????¥h?????????????¤G£l?????
770 : 	  úé???????¤†??????????????????????
771 : 	  ?§?¨Á???????¦u?????????
772 : 	  ?§?¨Á??????????????????????????
773 : 	  ????????????????úå??????????????????
774 : 	  ???????§?¨Á???????
775 : 	  ?§k???§k?¨Á?????????????¤G£l???
776 : 
777 :       <dl>
778 : 	<dt>int fromindex
779 : 	<dd>?¥h?????????????
780 : 	<dt>int toindex
781 : 	<dd>?¤†Ô???????????
782 :       </dl>
783 :       ?¤†Ô??şs??MI?¥i?????
784 :       <br>
785 :       <hr>
786 :       <br>
787 : 	  
*/

	if( strcmp( funcname , "SI" ) == 0 ){
		int fromindex;
		int toindex;
		fromindex = lssproto_demkstr_int( lssproto.token_list[2] );
		toindex = lssproto_demkstr_int( lssproto.token_list[3] );
		lssproto_SI_recv( fd,fromindex,toindex);
		return 0;
	}
/*
806 :   <LI><a name="SC_MSG"><font color=blue>servertoclient MSG( int aindex , string text , int color );</font></a><br>
807 :       (MeSsaGe)
808 :       ????????????????????????????????
809 :       ??ıï??????¤GıĞ????????????????ûõıï???
810 :       ?????????????????T??¨????????????
811 :       <dl>
812 : 	<dt>int aindex
813 : 	<dd>??????????????????????¥{¤e????ûê
814 : 	    ??????????????????
815 : 	<dt>string text
816 : 	<dd>??????¥›?????????¢¬???????????¥›???mm/dd hh:mm|text...|graphicsno|lv|name|itemgraphicsno
817 : 	    ??????????????¦T¦Ü????¦V???????ûÂ????????¥›??????§k??
818 : 	    ¤GıĞ????-1???ıÍ????????????¢V????????mm/dd hh:mm|text|-1
819 : 	    ???????ıÍ??????????????§k???¦t??????
820 : 	    lv????????????????????ş¡q??¦t????????????????????
821 : 	    itemgraphicsno ?????????????§k???¦t??????
822 : 	<dt>int color
823 : 	<dd>ıè?
824 : 	<dt>
825 :       </dl>
826 :       <br>
827 :       <hr>
828 :       <br>
829 :   
*/

	if( strcmp( funcname , "MSG" ) == 0 ){
		int aindex;
		char* text;
		int color;
		aindex = lssproto_demkstr_int( lssproto.token_list[2] );
		text = lssproto_wrapStringAddr( lssproto_stringwrapper[2] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[3] ));
		color = lssproto_demkstr_int( lssproto.token_list[4] );
		lssproto_MSG_recv( fd,aindex,text,color);
		return 0;
	}
/*
851 :   <LI><a name="SC_PME"><font color=blue>servertoclient PME( int objindex, int graphicsno, int x, int y, int dir, int flg, int no, string cdata );<br></font></a>
852 :       (PetMeSsaEffect)
853 :       ?????????????¥KıÍ?¤ú????<br><br>
854 :       <dl>
855 : 	<dt>int objindex
856 : 	<dd>??????????§k??
857 : 	<dt>int graphicsno
858 : 	<dd>¥KıÍ????????§k?
859 : 	<dt>int x,y
860 : 	<dd>???£t?üÒ????
861 : 	<dt>int dir;
862 : 	<dd>??©˜??????????
863 : 	<dt>int flg
864 : 	<dd>?????(0)??????(1)?
865 : 	<dt>int no
866 : 	<dd>?üÒ§k??
867 : 	<dt>string cdata
868 : 	<dd>C ?????¦V????????????????üÒ????????????????????
869 : 	    ???¢¬???????????????şÎ?????????????ıÍ??
870 : 	    ????????C ??????????
871 :       </dl>
872 :       <br>
873 :       <br>
874 :       <hr>
875 :       <br>
876 : 	  
*/

	if( strcmp( funcname , "PME" ) == 0 ){
		int objindex;
		int graphicsno;
		int x;
		int y;
		int dir;
		int flg;
		int no;
		char* cdata;
		objindex = lssproto_demkstr_int( lssproto.token_list[2] );
		graphicsno = lssproto_demkstr_int( lssproto.token_list[3] );
		x = lssproto_demkstr_int( lssproto.token_list[4] );
		y = lssproto_demkstr_int( lssproto.token_list[5] );
		dir = lssproto_demkstr_int( lssproto.token_list[6] );
		flg = lssproto_demkstr_int( lssproto.token_list[7] );
		no = lssproto_demkstr_int( lssproto.token_list[8] );
		cdata = lssproto_wrapStringAddr( lssproto_stringwrapper[8] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[9] ));
		lssproto_PME_recv( fd,objindex,graphicsno,x,y,dir,flg,no,cdata);
		return 0;
	}
/*
882 :   <LI><a name="SC_AB"><font color=blue>servertoclient AB( string data );</font></a><br>
883 :       ?????????????ıï??????????¡u¥›??
884 :       <dl>
885 : 	<dt>string data
886 : 	<dd>ıÑ©?¥›??¤úû¨?????¢¬??ıÑ©?????ş†????????ûê?????ş¡q?
887 : 	    ???????????????????????????
888 : 	    ???ş°?§Æ???????
889 : 	    ???????¤œ???ıø????
890 : 	    <code>?ş°?|¦Kş°?|...</code>ş°??şÉ?????
891 : 	    
892 : 	    ?ş°§Æ???????????şÎ????
893 : 	    <br>
894 : 	    <code>úé????|ş¡q(§ó??)|????£k|duelpoint|???|??§k?
895 : 	    </code>
896 : 	    <br>
897 : 	    ?????? Nş°??ş¡q????????? 4(N-1)+1§k??
898 : 	    ??????????????????????????¢V??
899 : 	    ????????????????¢V?????ş¡q§ó???<a
900 : 	    href="#escaping">?????</a>??????şS?????
901 : 	    ????0????????1?ıÆ???????????
902 : 	    ??£k???????ş°?????????§Æ?????
903 : 	    setup.cf?? servernumber=n ?n?£k??ıï????
904 : 	    ¥{¨??¦u????ş¡q????????ıÍ????¡q?AB
905 : 	    ?????ûõıï??ş¡q?ıÑ©??ıø???????????
906 : 	    ??????ıø????????ş¡q?ıÑ©?????şÎ?
907 : 	    2¥T??ıø????????
908 : 		
909 :       </dl>
910 :       <br>
911 :       <hr>
912 :       <br>
*/

	if( strcmp( funcname , "AB" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_AB_recv( fd,data);
		return 0;
	}
/*
913 :   <LI><a name="SC_ABI"><font color=blue>servertoclient ABI( int num, string data );</font></a><br>
914 : 	AB?£O¢l§\?num ??û«§Æ??????????§k???????¦V?????
915 : 	data??ş«?AB?????<br>
916 :       <br>
917 :       <br>
918 :       <hr>
919 :       <br>
920 : 
*/

	if( strcmp( funcname , "ABI" ) == 0 ){
		int num;
		char* data;
		num = lssproto_demkstr_int( lssproto.token_list[2] );
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[2] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[3] ));
		lssproto_ABI_recv( fd,num,data);
		return 0;
	}
/*
1011 :     <LI><a name="S2CTK"><font color=blue>servertoclient TK( int index,string message ,int color);<br></font></a>
1012 :       <dl>
1013 : 	<dt>index
1014 : 	<dd>????????????????-1 ?????????¢¬
1015 : 	    ?????????????<br>
1016 : 	<dt>string
1017 : 	<dd>string ?¥›??, "|" ?2???şú?????????????
1018 : 	    ???§ó?????2????????¥›??¨Á?????2??
1019 : 	    ??????<a href="#escaping">?????</a>??????
1020 : 	    ?????????????????????
1021 : 	    <ul>
1022 : 	      <li>"P" ???<br>
1023 : 		  ??????????û«§Æ??????????????
1024 : 		  ??????????????????????
1025 : 		  <pre>
1026 : 		  "P|?????"
1027 : 		  </pre>
1028 : 	      <li>"F"???<br>
1029 : 	          <pre>
1030 : 	          F|charaindex|?????
1031 : 	          </pre>
1032 : 	          ??üÒ?§ó????????úù¤e???charaindex???üÒ??üÒ?
1033 : 	          ??????¤úû¨???<br>
1034 : 	          
1035 : 	    </ul>
1036 : 	<dt>color
1037 : 	<dd>??????ıè?ıè?¤e???
1038 :       </dl>
1039 :       <br>
1040 :       <hr>
1041 :       <br>
1042 : 
*/

	if( strcmp( funcname , "TK" ) == 0 ){
		int index;
		char* message;
		int color;
		index = lssproto_demkstr_int( lssproto.token_list[2] );
		message = lssproto_wrapStringAddr( lssproto_stringwrapper[2] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[3] ));
		color = lssproto_demkstr_int( lssproto.token_list[4] );
		lssproto_TK_recv( fd,index,message,color);
		return 0;
	}
/*
1043 :   <LI><a name="SC_MC"><font color=blue>servertoclient MC(int fl , int x1 , int y1 , int x2, int y2, int tilesum, int objsum, int eventsum,string data );<br></font></a>
1044 :       ??????¡q??????????????????????û«§Æ?????????????????????úÜ??
1045 :       ???§{???????????M??ıï????????ıÍ??M???????????????????????úé??
1046 :       <dl>
1047 : 	<dt>int fl
1048 : 	<dd>???§k?
1049 : 	<dt>int x1
1050 : 	<dd>?ıÆX
1051 : 	<dt>int y1
1052 : 	<dd>?ıÆY
1053 : 	<dt>int x2
1054 : 	<dd>??X
1055 : 	<dt>int y2
1056 : 	<dd>??Y
1057 : 	<dt>int timesum
1058 : 	<dd>??????????
1059 : 	<dt>int objsum
1060 : 	<dd>?????????????
1061 : 	<dt>int eventsum
1062 : 	<dd>????????????????????????????????üÇ???????§kıÆ??????????ıÆ??????úé?????
1063 : 	<dt>string data
1064 : 	<dd>????ş¡q§ó??????????M?????????úé????
1065 : 	
1066 :       </dl>
1067 :       <br>
1068 :       <hr>
1069 :       <br>
1070 :       
*/

	if( strcmp( funcname , "MC" ) == 0 ){
		int fl;
		int x1;
		int y1;
		int x2;
		int y2;
		int tilesum;
		int objsum;
		int eventsum;
		char* data;
		fl = lssproto_demkstr_int( lssproto.token_list[2] );
		x1 = lssproto_demkstr_int( lssproto.token_list[3] );
		y1 = lssproto_demkstr_int( lssproto.token_list[4] );
		x2 = lssproto_demkstr_int( lssproto.token_list[5] );
		y2 = lssproto_demkstr_int( lssproto.token_list[6] );
		tilesum = lssproto_demkstr_int( lssproto.token_list[7] );
		objsum = lssproto_demkstr_int( lssproto.token_list[8] );
		eventsum = lssproto_demkstr_int( lssproto.token_list[9] );
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[9] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[10] ));
#ifdef __SKYISLAND
		extern void SkyIslandSetNo( int fl);
		SkyIslandSetNo( fl);
#endif
		lssproto_MC_recv( fd,fl,x1,y1,x2,y2,tilesum,objsum,eventsum,data);
		return 0;
	}
/*
1091 :   <LI><a name="SC_M"><font color=blue>servertoclient M(int fl , int x1 , int y1 , int x2, int y2 ,string data );<br></font></a>
1092 :       ?????ıï??????îÄ????ıï?????????¢†???
1093 :       ??????????????????????ıï????????
1094 :       ????????????ıï??????????????????
1095 :       ???§Æ??????????üØ???Ô??¨Á????üØ?????
1096 :       <br><br>
1097 :       <dl>
1098 : 	<dt>int fl
1099 : 	<dd>?????????§k?
1100 : 	<dt>int x1
1101 : 	<dd>?????????¡E¢n?£t??ıÆX
1102 : 	<dt>int y1
1103 : 	<dd>?????????¡E¢n?£t??ıÆY
1104 : 	<dt>int x2
1105 : 	<dd>?????????¡E¢n?£t???X
1106 : 	<dt>int y2
1107 : 	<dd>?????????¡E¢n?£t???Y
1108 : 	<dt>string data
1109 : 	<dd>???????§ó??|???|??????|??????????
1110 : 	    ???????
1111 : 	    data???????§k??"76,76,77,78,98,90,1,1,1,2"???
1112 : 	    ???¢¬???¡‰?§ı???????????????????
1113 : 	    ???ıÆ????????????????????£h???ş­
1114 : 	    ??ıÍ??¡u?ş§Æ??ıï????¨÷???ıÍ???¨÷§Æ???
1115 : 	    ???????§R£e????????????????????
1116 : 	    ???????????????????????¨ò¢V?????
1117 : 	    ??????ıÑ©????????§ó???<a
1118 : 	    href="#escaping">?????</a>??¢¬?????
1119 :       	    ??????????????üÇ???????§kıÆ??????????ıÆ??????úé?????
1120 :       </dl>
1121 :       <br>
1122 :       <br>
1123 :       <hr>
1124 :       <br>
1125 : 
1126 : 
1127 : 
*/

	if( strcmp( funcname , "M" ) == 0 ){
		int fl;
		int x1;
		int y1;
		int x2;
		int y2;
		char* data;
		fl = lssproto_demkstr_int( lssproto.token_list[2] );
		x1 = lssproto_demkstr_int( lssproto.token_list[3] );
		y1 = lssproto_demkstr_int( lssproto.token_list[4] );
		x2 = lssproto_demkstr_int( lssproto.token_list[5] );
		y2 = lssproto_demkstr_int( lssproto.token_list[6] );
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[6] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[7] ));
		lssproto_M_recv( fd,fl,x1,y1,x2,y2,data);
		return 0;
	}
/*
1135 :   <LI><a name="S2CC"><font color=blue>servertoclient C( string data );<bR></font></a>
1136 :       (Characters)
1137 :       ??????? CA ?????????????£??????? C 
1138 :       ????????????????????????
1139 :       <br><br>
1140 :       <dl>
1141 : 	<dt>string data
1142 : 	<dd>	  ??????? ???3ûï?????????????
1143 : 	    ?????.?????????ş«??????şS'|'?????
1144 : 	    ????
1145 : 
1146 : 	    <ul>
1147 : 	      <li>??şS???????????12??ıÍ?<br>
1148 : 		  ?????¥›??
1149 : 
1150 : 		  <code>WHICHTYPE|CHARINDEX|X|Y|DIR|BASEIMG|LEVEL|NAMECOLOR|NAME|SELFTITLE|WALKABLE|HEIGHT|POPUPNAMECOLOR</code>
1151 : 		  ???????????????????????????<br>
1152 : 		  
1153 : 		  WHICHTYPE ????????????????ûï????
1154 : 		  ????????????????????¤e???????<br>
1155 : 		  <pre>
1156 : 		typedef enum
1157 : 		{
1158 : 		    CHAR_TYPENONE,          ?????
1159 : 		    CHAR_TYPEPLAYER,        ?????
1160 : 		    CHAR_TYPEENEMY,         ¤„
1161 : 		    CHAR_TYPEPET,           ???
1162 : 		    CHAR_TYPEDOOR,          ??
1163 : 		    CHAR_TYPEBOX ,          ©?
1164 : 		    CHAR_TYPEMSG ,          ?§Y
1165 : 		    CHAR_TYPEWARP ,         ??????
1166 : 		    CHAR_TYPESHOP ,         ¤•
1167 : 		    CHAR_TYPEHEALER ,       ????
1168 : 		    CHAR_TYPEOLDMAN ,       £•?
1169 : 		    CHAR_TYPEROOMADMIN,     ¦Û¥húÛ?
1170 : 		    CHAR_TYPETOWNPEOPLE,    ?????
1171 : 		    CHAR_TYPEDENGON,        ¤?§\
1172 : 		    CHAR_TYPEADM,           ¤?§\
1173 : 		    CHAR_TYPETEMPLE,        Temple master
1174 : 		    CHAR_TYPESTORYTELLER,   ???
1175 : 		    CHAR_TYPERANKING,       ¦Û¥húÛ?????¤úû¨???
1176 : 		    CHAR_TYPEOTHERNPC,      ??¢\???¢nı¾?????NPC
1177 : 		    CHAR_TYPEPRINTPASSMAN,  ????????¤úû¨??NPC
1178 : 		    CHAR_TYPENPCENEMY,      ?¤e¤„
1179 : 		    CHAR_TYPEACTION,        ??????§T???NPC
1180 : 		    CHAR_TYPEWINDOWMAN,     ?????¤úû¨??NPC??????)
1181 : 		    CHAR_TYPESAVEPOINT,     ???????
1182 : 		    CHAR_TYPEWINDOWHEALER,  ?????????????
1183 : 		    CHAR_TYPEITEMSHOP,	    ?¤•
1184 : 		    CHAR_TYPESTONESHOP,	    şğ§l?????????
1185 : 		    CHAR_TYPEDUELRANKING,   DUEL?????NPC
1186 : 		    CHAR_TYPEWARPMAN,	    ?????NPC
1187 : 		    CHAR_TYPEEVENT,	    ????NPC
1188 : 		    CHAR_TYPEMIC,	    ????NPC
1189 : 		    CHAR_TYPELUCKYMAN,	    ????NPC
1190 : 		    CHAR_TYPEBUS,	    ??????
1191 : 		    CHAR_TYPECHARM,	    ????NPC
1192 : 		    CHAR_TYPENUM,
1193 : 		}CHAR_TYPE;
1194 : 		  </pre>
1195 : 		  
1196 : 		  ???¢\???????NPC?¤„??????????ıï
1197 : 		  ????????§d?????¡u??ıï?????
1198 : 		  ????????????????ûõ?????????
1199 : 		  ??????????????????????ı¤???
1200 : 		  ??????????????????????????
1201 : 		  ??????¤úû¨??ıÑ©???ıÑ©?????????
1202 : 		  ???????????????????¤úû¨?????
1203 : 		  ¨Á????ıÍ??????????????¦u¥h¤†???
1204 : 		  ??????????? SELFTITLE??????????
1205 : 		  ?????şS????????????????????
1206 : 		  ?????????????????(CA)???????
1207 : 		  ??¤úû¨???CHARINDEX????¥›????????¥{
1208 : 		  ¤e???§k??BASEIMG?¤úû¨????§k??LEVEL???
1209 : 		  ?????(0??¤úû¨??????£k?NPC???úé??)
1210 : 		  WALKABLE?1?????ıÆ?¤G?????????0??¤G
1211 : 		  ???????????HEIGHT????????????
1212 : 		  ?????úù¤e?
1213 : 		  
1214 : 		  ???????ş¡q?û«?ı¯???<a href="#escaping">
1215 : 		  ?????</a>???????????'|'??????
1216 : 		  ûè?????????????????????????'
1217 : 		  |'????§ó?????????????£O??'|'??
1218 : 		  ??????????ıï??©˜??ş¡q?û«?ı¯????
1219 :                   ?????????şS????????ıï???
1220 :                   ???????ıÍ??û«?ı¯??¢„????????¡@¤e
1221 :                   ??????ş¡q??ıï??????<br>
1222 : 		  
1223 : 	      <Li>??şS???????????6??ıÍ?<br>
1224 : 		  ?????¥›??
1225 : 		  <code>INDEX|X|Y|BASEIMG|LEVEL|ITEM1LINEINFO</code>
1226 : 		  ?Ôş???????????????ıÑ©????
1227 : 		  INDEX?????????????????INDEX????
1228 : 		  ???????ı¤???úé????X,Y?????????
1229 : 		  ???£t?BASEIMG????§k??ITEM1LINEINFO?1?
1230 : 		  info?¤úû¨?????ıÑ©?????????????¥›
1231 : 		  ?¤úû¨??ıÑ©?¨?©˜©œ??????????????
1232 : 		  ?CA?????ITEM1LINEINFO?<a href="#escape">????
1233 : 		  ?</a>????????????©˜©œ?ıÆ????úÓı©?
1234 : 
1235 : 	      <Li>??şS???????????4??ıÍ?<br>
1236 : 		  ?????¥›??
1237 : 		  <code>INDEX|X|Y|VALUE</code>
1238 : 		  ?Ôş?????????????ıÑ©????¥›???
1239 : 		  ?????INDEX,X,Y ??????¥i??VALUE ????
1240 : 		  ?????????????????????ıÑ©????
1241 : 	      <li>??şS???????????1??ıÍ?<br>
1242 : 		  <code>INDEX</code>
1243 : 		  ??????C????????
1244 : 	    </ul>
1245 :       </dl>
1246 :       <br>
1247 :       <br>
1248 :       <hr>
1249 :       <br>
1250 : 
1251 : 
1252 :       
*/

	if( strcmp( funcname , "C" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_C_recv( fd,data);
		return 0;
	}
/*
1253 :   <LI><a name="SC_CA"><font color=blue>servertoclient CA( string data );<br></font></a>
1254 :       (CharacterAction)
1255 :       ???§d?????????????ıÖ¢t??ıø???
1256 :       ??????????????©˜¤†??ıï???
1257 :       ?????1?????????ıï????????????????
1258 :       ??üÎ?????<br><br>
1259 : 
1260 :       <dl>
1261 : 	<dt>string data
1262 : 	<dd>CHARINDEX|X|Y|ACTION|PARAM1|PARAM2|PARAM3|PARAM4|....??
1263 : 	    ?????????????PARAM????????????
1264 : 	    úé????????????????????X,Y??£t??
1265 : 	    ???????????????£t?úù¤e???
1266 : 	    ??§ó?????????????
1267 : 	    <table border>
1268 : 	      <tr><td>ACTION</td><td>PARAM1</td><td>PARAM2</td>
1269 : 	      <td>PARAM3</td><td>PARAM4</td></tr>
1270 : 	      <tr><td>Stand:0</td><td>©˜?0~7</td><td></td><td></td><td></td></tr>
1271 : 	      <tr><td>Walk:1</td><td>©˜?0~7</td><td></td><td></td><td></td></tr>
1272 : 	      <tr><td>Attack:2</td><td>©˜?0~7</td><td></td><td></td><td></td></tr>
1273 : 	      <tr><td>Throw:3</td><td>©˜?0~7</td><td></td><td></td><td></td></tr>
1274 : 	      <tr><td>Damage:4</td><td>©˜?0~7</td><td></td><td></td></tr>
1275 : 	      <tr><td>Dead:5</td><td>©˜?0~7</td><td></td><td></td><td></td></tr>
1276 : 	      <tr><td>UseMagic:6</td><td>©˜?0~7</td></tr>
1277 : 	      <tr><td>UseItem:7</td><td>©˜?0~7</td></tr>
1278 : 	      <tr><td>Effect:8</td><td>©˜?0~7</td><td>?????§k?</td></tr>
1279 : 	      <tr><td>Down:10 (¥X??)</td><td>©˜?0~7</td></tr>
1280 : 	      <tr><td>Sit:11 (??)</td><td>©˜?0~7</td></tr>
1281 : 	      <tr><td>Hand:12 (ûê?ı÷?)</td><td>©˜?0~7</td></tr>
1282 : 	      <tr><td>Pleasure:13 (??)</td><td>©˜?0~7</td></tr>
1283 : 	      <tr><td>Angry:14 (¥W?)</td><td>©˜?0~7</td></tr>
1284 : 	      <tr><td>Sad:15 (§v??)</td><td>©˜?0~7</td></tr>
1285 : 	      <tr><td>Guard:16 (???)</td><td>©˜?0~7</td></tr>
1286 : 	      <tr><td>actionwalk:17 (??????¨÷?)</td><td>©˜?0~7</td></tr>
1287 : 	      <tr><td>nod:18 (????)</td><td>©˜?0~7</td></tr>
1288 : 	      <tr><td>actionstand:19 (???????????)</td><td>©˜?0~7</td></tr>
1289 : 	      <tr><td>Battle:20 (¡P¥fıÑ©)</td><td>©˜?0~7</td><td>BattleNo(-1 ??¤úû¨ı¤??</td><td>SideNo</td><td>HelpNo?????????CA¤úû¨????ı¤?????ş†??</td></tr>
1290 : 	      <tr><td>Leader:21 (????ıÑ©)</td><td>©˜?0~7</td><td>0:¤úû¨ı¤? 1:¤úû¨</td></tr>
1291 : 	      <tr><td>Watch:22 (¡P¥f?¡P)</td><td>©˜?0~7</td><td>0:¤úû¨ı¤? 1:¤úû¨</td></tr>
1292 : 	      <tr><td>namecolor:23(ş¡q?ıèıÑ©)</td><td>©˜?0~7</td><td>ş¡q?ıè§k?</td></tr>
1293 : 	      <tr><td>Turn:30(©˜?¨Á?)</td><td>©˜?0~7</td><td></td></tr>
1294 : 	      <tr><td>Warp:31(???)</td><td>©˜?0~7</td><td></td></tr>
1295 : 	      
1296 : 	</table>
1297 : 	ACTION?£k?şĞ???¥›??ıÆ?¤ú??£Z???????
1298 :   </dl>
1299 :   <br>
1300 :   <br>
1301 :       <hr>
1302 :       <br>
1303 : 
1304 : 
*/

	if( strcmp( funcname , "CA" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_CA_recv( fd,data);
		return 0;
	}
/*
1305 :   <LI><a name="CD"><font color=blue>servertoclient CD( string data );<bR></font></a>
1306 :       (CharacterDelete)
1307 : 	data ??????,???şú??????????
1308 : 	¦ú??????üÒ???
1309 :       ??ID????????????ı¤????????????????
1310 :       ?¤???
1311 :       <br>
1312 :       <hr>
1313 :       <br>
1314 :   
*/

	if( strcmp( funcname , "CD" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_CD_recv( fd,data);
		return 0;
	}
/*
1315 :   <LI><a name="R"><font color=blue>servertoclient R( string data );<br></font></a>
1316 :       (Radar)
1317 :       ?????¥›??????????ıï?????????????ıï?
1318 :       ???????????????¤ˆ?????????ıï???
1319 :       ????10¨÷????????1§Æ?????<br><br>
1320 : 
1321 :       <dl>
1322 : 	<dt>string data
1323 : 	<dd>x ,y, kind ,???£k?'|'????????????
1324 : 	    ???'|'????????
1325 : 	    x,y???????¡E¢n?£t?kind????????£k????
1326 : 	    ???????????§Ä?ûï??úù¤e???????????
1327 : 	    ?ûï????????üæ???©œ???????¨Á??????
1328 : 	    ?????????
1329 : 	    <table border>
1330 : 	      <tr><td>kind?£k</td><td>¥›?</td></tr>
1331 : 	      <tr><td>E</td><td>¤„</td></tr>
1332 : 	      <tr><td>P</td><td>?????</td></tr>
1333 : 	      <tr><td>S</td><td>?</td></tr>
1334 : 	      <tr><td>G</td><td>??</td></tr>
1335 : 	      <tr><td>I</td><td>????(???)</td></tr>
1336 : 	</table>
1337 :   </dl>
1338 :   data??£º<code>"12|22|E|13|24|P|14|28|P"</code>
1339 :   ??§ó?????????????
1340 :   <br>
1341 :   <br>
1342 :       <hr>
1343 :       <br>
1344 : 
*/

	if( strcmp( funcname , "R" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_R_recv( fd,data);
		return 0;
	}
/*
1369 :   <LI><a name="SC_S"><font color=blue>servertoclient S( string data );<br></font></a>
1370 :       (Status)
1371 :       ???????????ıï???
1372 :       ???? ??????§ó?(?§ó?)¥›? ?????????????
1373 :       1§ó?????????????§Æ??¥›??2§ó????????
1374 :       ¥›???????????????????şS??'|'?????????
1375 :       2??????????¥›?????<br>
1376 :       <br>
1377 :       <UL>
1378 : 	<LI>P ¡u?????<br><br>
1379 : 	    kubun hp maxhp mp maxmp str tough exp maxexp exp 
1380 : 	    level attackpower deffencepower 
1381 : 	    fixdex fixcharm fixluck fixfireat fixwaterat fixearthat fixwindat
1382 : 	    gold ¦Ü????
1383 : 	    ı¯??index ş¡q û«?ı¯? <br>
1384 : 
1385 : 	    ????? '|' ??????ş¡q?û«?ı¯???
1386 : 	    <a href="#escaping">?????</a>?????
1387 : 	    ??şS????????¤Gıï????<br>
1388 : 	    ?????£k??????<br>
1389 : 	    kubun ???¦V?????¡q???????ıï?
1390 : 	    ??ıÆ???????????????????????§k?¦V???ıï??????
1391 : 	   ?????????hp?Maxhp?kubun ????????¦t???????<br>
1392 : 	    <table border>
1393 : 	      <tr><td>kunun</td><td>int</td></tr>
1394 : 	      <tr><td>Hp(¢l?)hp</td><td>int</td></tr>
1395 : 	      <tr><td>MaxHp</td><td>int</td></tr>
1396 : 	      <tr><td>Mp(ûöüÓ???)</td><td>int</td></tr>
1397 : 	      <tr><td>MaxMp</td><td>int</td></tr>
1398 : 	      <tr><td>Vital(¢l?)</td><td>int</td></tr>
1399 : 	      <tr><td>Str(??)</td><td>int</td></tr>
1400 : 	      <tr><td>Tough(ıÇ¦Ş?)</td><td>int</td></tr>
1401 : 	      <tr><td>Dex(¡‰??)</td><td>int</td></tr>
1402 : 	      <tr><td>Exp(??£k)exp</td><td>int</td></tr>
1403 : 	      <tr><td>MaxExp(??????£k)</td><td>int</td></tr>
1404 : 	      <tr><td>Level(???)</td><td>int</td></tr>
1405 : 	      <tr><td>Attack(???)</td><td>int</td></tr>
1406 :      	      <tr><td>Defense(ûé§?)</td><td>int</td></tr>
1407 : 	      <tr><td>fQuick(?ü¬¡‰??)</td><td>int</td></tr>
1408 : 	      <tr><td>fCharm(şu?)</td><td>int</td></tr>
1409 : 	      <tr><td>fLuck(?)</td><td>int</td></tr>
1410 : 	      <tr><td>fEarth(Ô)fixearthat</td><td>int</td></tr>
1411 : 	      <tr><td>fWater(?)</td><td>int</td></tr>
1412 : 	      <tr><td>fFire(?)</td><td>int</td></tr>
1413 : 	      <tr><td>fWid(?)fixwindat</td><td>int</td></tr>
1414 : 	      <tr><td>Gold(??)</td><td>int</td></tr>
1415 : 	      <tr><td>ı¯??index</td><td>int</td></tr>
1416 : 	      <tr><td>????????</td><td>int</td></tr>
1417 : 	      <tr><td>ş¡q</td><td>§ó??</td></tr>
1418 : 	      <tr><td>û«?ı¯?</td><td>§ó??</td></tr>
1419 : 	    </table>
1420 : 	    ?¢l?( char ?¦”??????? )<br>
1421 : 	    <code>
1422 : 	    P10|20|10|20|10|10|10|1|2|13|13|1|100|10|???|abc|def
1423 : 	    </code>
1424 : 	<br><br>
1425 : 	<li>C ?¤õ<br><br>
1426 : 	    floor maxx maxy x y<br>
1427 : 	    ?  | ??şú?????<br>
1428 : 	    ?¢l?( char ?¦”??????? )<br>
1429 : 	    <code>
1430 : 	    C1024|100|100|10|20
1431 : 	    </code>
1432 : 	    ıÆ?????????ID1024, ???100x100 X 10,Y 20???
1433 : 	    ??????????????¥›??????????????
1434 : 	    ????????¤õ????????£l???????????
1435 : 	    ??????????¨÷????????¥›??£t??????
1436 : 	    ??????????úğ???£húé?????????????
1437 : 	    ?????????????şÕ??£k??ıï??????????
1438 : 	    
1439 : 
1440 : 	<br><br>
1441 : 	<LI>I ¡u????<br><br>
1442 : 	    (????1)|(????2)...(????n)<br>
1443 : 	    ?????¥›?????©˜©œ???????
1444 : 	    ?????????????????6???????????
1445 : 	    ?ıï???????????¥›???<br>
1446 : 	    <br>
1447 : 	    ş¡q|ş¡q2|????|?????¡Cş‘|???§k?|úé??¦uıÍ?|úé?¢nı¾|???????|????<br>
1448 : 	    <br>
1449 : 	    <ul>
1450 : 	      <li>????ş?û±¨????û«¥h¤†?¨Á?????
1451 : 	      <li>ş¡q2?û±¨?????????????¦u??¦V??¤e?
1452 : 		  ?????????????2???¦V????
1453 : 	      <li>?????ş¡q?ıè?¢v???úé??
1454 : 	      <li>?????¡Cş‘?
1455 : 	      <li>???§k?????§k??
1456 : 	      <li>úé??¦uıÍ??????????????úé??????¦u??¦V?????
1457 : 	          ????????????????¤e???????<br>
1458 : 	          <pre>
1459 : 			typedef enum
1460 : 			{
1461 : 				ITEM_FIELD_ALL,			????ıÍ??úé??
1462 : 				ITEM_FIELD_BATTLE,		¡P¥f???
1463 : 				ITEM_FIELD_MAP,			¤GıĞ???ıÆ??
1464 : 
1465 : 			}ITEM_FIELDTYPE;
1466 : 	          </pre>
1467 : 	          <br>
1468 : 	      <li>úé?¢nı¾??????????úé??????üÒ??¢nı¾?¦V?????
1469 : 	          ????????????¤e???????
1470 : 	          <pre>
1471 : 			typedef enum
1472 : 			{
1473 : 				ITEM_TARGET_MYSELF,		û«§Æ??
1474 : 				ITEM_TARGET_OTHER,		¢\?ş°?û«§Æ??)
1475 : 				ITEM_TARGET_ALLMYSIDE,		şs©˜¡u¢l
1476 : 				ITEM_TARGET_ALLOTHERSIDE,	?ûê¢D¡u¢l
1477 : 				ITEM_TARGET_ALL,		¡u?
1478 : 			}ITEM_TARGETTYPE;
1479 : 		</pre>
1480 :   	        <font size=+1>?????100?¢K????????ûÔ?¢nı¾????</font><br>
1481 : 	      <li>??????????????ıÆ?ûÔ?????§üÒ????
1482 : 	      <li>?????ıè???????ıï????????¢n?????¤G??<br>
1483 : 	          <table border=1>
1484 : 		    <tr><td>0bit?</td><td>????????ıï?¦u???????????ıï?¦u????????ıï?????</td></tr>
1485 : 		    <tr><td>1Bit?</td><td>????????şÎüÒ???????</td></tr>
1486 : 		    <tr><td>2Bit?</td><td>??????????????1????????</td></tr>
1487 : 		  </table>
1488 : 		<br>
1489 : 		<br>
1490 : 	    </ul>
1491 : 	    <br>
1492 : 	    ??????<a href="#escaping">?????</a>???<br>
1493 : 	    ?¢l?( char ?¦”??????? )<br>
1494 : 	    <code>
1495 : 	    I?? ? úó|str+2|1|??\|??|10|2|0
1496 : 	    </code>
1497 : 	    ?????£k??şs??şĞ?£k?
1498 : 	    <table border>
1499 : 	      <tr><td>1</td><td>????A</td></tr>
1500 : 	      <tr><td>2</td><td>????B</td></tr>	      
1501 : 	      <tr><td>3</td><td>????C</td></tr>
1502 : 	      <tr><td>4</td><td>????D</td></tr>
1503 : 	    </table>
1504 : 	    ???????????¤ú????§Æ??????5???????
1505 : 	    ????????şS?????ıÖ¢t??ıï??????
1506 : 
1507 : 	<br><br>
1508 : 	<LI>S ¡u???<br><br>
1509 : 	    (???0)|(???1)|(???2) ... (???n)<br>
1510 : 	    ı¯??¥i???????????¢†????§Æ??ıï?????
1511 : 	    ?????? ||| ????????
1512 : 	    ??????¥›???<br>
1513 : 	    ????ûï????|???<br>
1514 : 	    ????<br>
1515 : 	    ?¢l?( char ?¦”??????? )<br>
1516 : 	    <code>
1517 : 	    S10|2|20|2|||
1518 : 	    </code>	    
1519 : 
1520 : 	<br><br>
1521 : 	<LI>T ı¯?<br><br>
1522 : 	    (ı¯?0)|(ı¯?1)|(ı¯?2) ... (ı¯?n)<br><br>
1523 : 	    ı¯?????????ıÍ?? '|' ??¢Q??????¢Q???
1524 : 	    ??ı«????????????????????¢†??§Æ?ıï
1525 : 	    ???<br>
1526 : 	    ????????¥›???<br>
1527 : 	    ş¡q<br>
1528 : 	    ??????<br>
1529 : 	    ?¢l?( ?????? char ?¦”???????? )<br>
1530 : 	    <code>
1531 : 	    T??|?????
1532 : 	    </code>
1533 : 	    ???<a href="#escaping">?????</a>???<br>
1534 : 
1535 : 	<br>
1536 : 	<LI>M ?§Æ?????<br><br>
1537 : 	    ????????????????¦À§`?¨Á??????(??
1538 : 	    £k)????????(?¢†£k??)?????????????
1539 : 	    ?¨Á?????????¡u?????????ıï???????
1540 : 	    ??????????ş†¢j?úé?????????¥{?HP ,
1541 : 	    MP,EXP?£k?????????????ıï??????????
1542 : 	    ?????M????????2§ó?????¢‡??????HP?
1543 : 	    ??£k , ¢‡¦K?????MP?¢‡úÑ?????EXP????
1544 : 	    ????¢l??????
1545 : 	    <code>
1546 : 	    M54|210|8944909
1547 : 	    </code>
1548 : 	    ?????HP???£k?54?MP???£k?210???£k?8944909
1549 : 	    ???????????3ûï??¥{?¨Á?¦À¥T????úø???
1550 : 	    ??¥??????????????????M???????
1551 : 	    ??P?????¡u???????ıï???????????¤ˆ
1552 : 	    ????????úé?????????????úé?????üè
1553 : 	    ????
1554 : 	    
1555 : 	    <br><br>
1556 :         <li>D ????ID<br><br>
1557 : 	    ??????????????index??????????
1558 : 	    <code>D1000|912766409</code>????????
1559 : 	<br><br>
1560 : 	<li>E ???????????)|(ıÆ?)<br><br>
1561 : 	    ?????????ıï??????n/100<br>
1562 : 	    ???????????£k??????????¨÷¨÷???+1???????????????§R£e???
1563 : 	    ????ıÆ??£k???????????
1564 : 	    ???????????????????????????úÜ????
1565 : 	    
1566 : 	<br><br>
1567 : 	<li>J0 ?J6 úé??ûöüÓ?¥›?<br><br>
1568 : 	    úé??ûöüÓ?¥›???ıï???<br>
1569 : 	    0 ?6 ???????????§???¢n??????????§???¥d?¥q?ûê??ıß¦¹?
1570 : 	    ???§üÒ????¤e??????£???¡u???§???ıÑ©???<br>
1571 : 	    <code>J0|kubun|mp|field|target|name|comment</code><br>
1572 : 	    ????????????????<br>
1573 : 	    kubun ????????ş†??????ş†??????????????????????
1574 : 	    mp?ı¤§‡???¤ú??<br>
1575 : 	    field???ıÍ??úé???????????????¤e???????<br>
1576 : 	    <pre>
1577 : 		typedef enum
1578 : 		{
1579 : 			MAGIC_FIELD_ALL,		????ıÍ??úé??
1580 : 			MAGIC_FIELD_BATTLE,		¡P¥f???
1581 : 			MAGIC_FIELD_MAP,		¤GıĞ???ıÆ??
1582 : 			
1583 : 		}MAGIC_FIELDTYPE;
1584 : 	    </pre>
1585 : 	    target????¢nı¾?üÒ????????????????¤e???????<br>
1586 : 	    <pre>
1587 : 		typedef enum
1588 : 		{
1589 : 			MAGIC_TARGET_MYSELF,		û«§Æ??
1590 : 			MAGIC_TARGET_OTHER,		¢\?ş°?û«§Æ??)
1591 : 			MAGIC_TARGET_ALLMYSIDE,		şs©˜¡u¢l
1592 : 			MAGIC_TARGET_ALLOTHERSIDE,	?ûê¢D¡u¢l
1593 : 			MAGIC_TARGET_ALL,		¡u?
1594 : 			MAGIC_TARGET_NONE,		£M?¡k¢‘üÒ????ş\??????
1595 : 			MAGIC_TARGET_OTHERWITHOUTMYSELF,¢\?ş°?û«§Æ????)
1596 : 			MAGIC_TARGET_WITHOUTMYSELFANDPET, û«§Æ??????
1597 : 			MAGIC_TARGET_WHOLEOTHERSIDE,    ¨Â©˜????¡u¢l
1598 : 		}MAGIC_TARGETTYPE;
1599 : 	    </pre>
1600 : 	    <font size=+1>?????100?¢K????????ûÔ?¢nı¾????</font><br>
1601 : 	    <br>
1602 : 	    name?ûöüÓş?<br>
1603 : 	    comment???ûöüÓ?¡Cş‘?<br>
1604 : 	<br>
1605 : 	<br>
1606 : 	<li>N0 ? N3 ????????<br><br>
1607 : 	    ????????ş°?ıÑ©??ıï???<br>
1608 : 	    <code>N0|kubun|level|charaindex|maxhp|hp|mp|name</code>
1609 : 	    <br>
1610 : 	    kubun ????????ş†??????ş†?????????????????¡u??????<br>
1611 : 	    2?ıÆ??????????????????????1bit ? level 2bit ?charaindex???
1612 : 	    ??ıï????<br>
1613 : 	    charaindex ????charaindex<br>
1614 : 	    level???ş°?????<br>
1615 : 	    maxhp???ş°?MAXHP<br>
1616 : 	    hp???ş°????HP<br>
1617 : 	    mp???ş°???<br>
1618 : 	    name ???ş°?ş¡q?<br>
1619 : 	<br><br>
1620 : 	
1621 : 	<LI>K0?K4 ???????<br><br>
1622 : 	    hp maxhp mp maxmp str tough exp 
1623 : 	    level attackpower deffencepower 
1624 : 	    fixdex fixcharm fixluck fixfireat fixwaterat fixearthat fixwindat
1625 : 	    ş¡q status<br>
1626 : 	    K???0?4?úù¤e?????????úù¤e?????
1627 : 	    ?????????0???????????ş†??????
1628 : 	    ??ıÍ???????1??¡u??????
1629 : 	    2?ıÆ??????????????????????1bit ? hp  2bit ?maxhp???
1630 : 	    ??ıï????<br>
1631 : 	    ????? '|' ??????ş¡q?û«?ı¯???
1632 : 	    <a href="#escaping">?????</a>?????
1633 : 	    ??şS????????¤Gıï????<br>
1634 : 	    ?????£k??????
1635 : 	    <table border>
1636 : 	      <tr><td>No.(§k?)</td><td>int</td></tr>
1637 : 	      <tr><td>islive(şØ?)</td><td>int</td></tr>
1638 : 	      <tr><td>GRA(??§k?)</td><td>int</td></tr>
1639 : 	      <tr><td>Hp(¢o??)</td><td>int</td></tr>
1640 : 	      <tr><td>MaxHp(?¢†¢o??)</td><td>int</td></tr>
1641 : 	      <tr><td>Mp</td><td>int</td></tr>
1642 : 	      <tr><td>MapMp</td><td>int</td></tr>
1643 : 	      <tr><td>Exp(??£k)</td><td>int</td></tr>
1644 : 	      <tr><td>MaxExp(??????£k)</td><td>int</td></tr>
1645 : 	      <tr><td>Level(???)</td><td>int</td></tr>
1646 : 	      <tr><td>Attack(???)</td><td>int</td></tr>
1647 : 	      <tr><td>Defense(ûé§?)</td><td>int</td></tr>
1648 : 	      <tr><td>Quick(¡‰??)</td><td>int</td></tr>
1649 : 	      <tr><td>Ai(?şß¥T)</td><td>int</td></tr>
1650 : 	      <tr><td>fEarth(Ô)</td><td>int</td></tr>
1651 : 	      <tr><td>fWater(?)</td><td>int</td></tr>
1652 : 	      <tr><td>fFire(?)</td><td>int</td></tr>
1653 : 	      <tr><td>fWid(?)</td><td>int</td></tr>
1654 : 	      <tr><td>Slot(?¢†şğ§\?)</td><td>int</td></tr>
1655 : 	      <tr><td>ş¡q¨Á??????</td><td>int</td></tr>
1656 : 	      <tr><td>ş¡q</td><td>§ó??</td></tr>
1657 : 	      <tr><td>???????ş</td><td>§ó??</td></tr>
1658 : 	    </table>
1659 : 	    <br>
1660 : 	    ş¡q¨Á???????????????ş¡q?¨Á???????????????
1661 : 	    1 ??¨Á?£Ï£Ë????¨Á?¦Û?????<br>
1662 : 	    <br>
1663 : 	    <br>
1664 : 	    <br>
1665 : 	    ?¢l?( char ?¦”??????? )<br>
1666 : 	    <code>
1667 : 	    P10|20|10|20|10|10|10|1|2|13|13|1|100|10|???|PC
1668 : 	    </code>
1669 : 	    
1670 : 	<br><br>
1671 : 
1672 : 	<LI>W0?W4 ????????<br><br>
1673 : 	  <code>W0|skillid|field|target|name|comment| x 7</code><br>
1674 : 	  W0 ? W4 ??????????¢n??????<br>
1675 : 	  petskillid ????????§k??pet_skillinfo.h?¤e???????<br>
1676 : 	  field ????????úé??????????????????¤e???????<br>
1677 : 	  <pre>
1678 : 		typedef enum
1679 : 		{
1680 : 			PETSKILL_FIELD_ALL,		????ıÍ??úé??
1681 : 			PETSKILL_FIELD_BATTLE,		¡P¥f???
1682 : 			PETSKILL_FIELD_MAP,		¤GıĞ???ıÆ??
1683 : 
1684 : 		}PETSKILL_FIELDTYPE;
1685 : 	  
1686 : 	  </pre>
1687 : 	  target ?????¢nı¾????????????????????¤e???????<br>
1688 : 	  <pre>
1689 : 		typedef enum
1690 : 		{
1691 : 			PETSKILL_TARGET_MYSELF,		û«§Æ??
1692 : 			PETSKILL_TARGET_OTHER,		¢\?ş°?û«§Æ??)
1693 : 			PETSKILL_TARGET_ALLMYSIDE,	şs©˜¡u¢l
1694 : 			PETSKILL_TARGET_ALLOTHERSIDE,	?ûê¢D¡u¢l
1695 : 			PETSKILL_TARGET_ALL,		¡u?
1696 : 			PETSKILL_TARGET_NONE,		£M?¡k¢‘üÒ????ş\??????
1697 : 			PETSKILL_TARGET_OTHERWITHOUTMYSELF,¢\?ş°?û«§Æ????) 
1698 : 			PETSKILL_TARGET_WITHOUTMYSELFANDPET, û«§Æ??????
1699 : 		}PETSKILL_TARGETTYPE;
1700 : 	  </pre>
1701 : 	  <br>
1702 : 	  name ???ş¡q?<br>
1703 : 	  comment?????¢n??¡Cş‘?<br>
1704 : 	  target|name|comment| ?????§Æ??????????
1705 : 	  ?????????¥N????§I?????"|"???¢Q??ıÍ?
1706 : 	  ???????????¤úû¨????<br>
1707 : 	  <br><br>
1708 : 	  
1709 :       </ul>
1710 : 	  
1711 :       <br>
1712 :       <hr>
1713 :       <br>
1714 : 
*/

	if( strcmp( funcname , "S" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_S_recv( fd,data);
		return 0;
	}
/*
1715 :   <LI><a name="D"><font color=blue>servertoclient D( int category , int dx , int dy , string data );<br></font></a>
1716 :       (Display)
1717 :       ?ş???¤úû¨??úù??<br><br>
1718 : 
1719 :       <dl>
1720 : 	<dt>int category
1721 : 	<dd>??¤úû¨????
1722 : 	    <table border>
1723 : 	      <tr><td>£k</td><td>¥›?</td></tr>
1724 : 	      <tr><td>1</td><td>û«§Æ???????????data?§ó?
1725 : 		  ?????£k?</td></tr>
1726 : 		  <tr><td>2</td><td>û«§Æ?????????data?§ó???
1727 : 		      ???£k</td></tr>
1728 : 		</table>
1729 : 	<dt>int dx
1730 : 	<dd>?????????????¢n?£tX??§a¤†???????§DşØ
1731 : 	    ???£t??????????£k??¤ˆ?¤ˆşú??£t??úÜ??
1732 : 	    ¤ş????
1733 : 	<dt>int dy
1734 : 	<dd>?¢n?£tY
1735 : 	<dt>string data 
1736 : 	<dd>¤úû¨??¥›??¥›??category????????
1737 : 	    ??§ó???<a href="#escaping">?????</a>??????
1738 : 	    ?????
1739 :       </dl>
1740 :       <br>
1741 :       <br>
1742 :       <br>
1743 :       <hr>
1744 :       <br>
*/

	if( strcmp( funcname , "D" ) == 0 ){
		int category;
		int dx;
		int dy;
		char* data;
		category = lssproto_demkstr_int( lssproto.token_list[2] );
		dx = lssproto_demkstr_int( lssproto.token_list[3] );
		dy = lssproto_demkstr_int( lssproto.token_list[4] );
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[4] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[5] ));
		lssproto_D_recv( fd,category,dx,dy,data);
		return 0;
	}
/*
1760 :   <li><a name="SC_FS"><font color=blue>servertoclient FS( int flg);<br></font></a>
1761 :       (FlgSet)PS????????????????û«§Æ?ıÖ¢t??????????<br><br>
1762 :       <dl>
1763 :         <dt>int flg
1764 :         <dd> 0 bit  0: ??Off                  1: ??On<br>
1765 :              ???ştúé??1 bit  0: ¡P¥f¥N?úÓ?off          1: ¡P¥f¥N?úÓ?On    <br>
1766 :              2 bit  0: DUEL off                 1: DUEL On<br>
1767 :              3 bit  0: ?¤G????????     1: ????????????§Š??????<br>
1768 :              4 bit  0: şúê??OK               1: şúê???§r<br>
1769 :       </dl>
1770 :       <br>
1771 :       <br>
1772 :       <hr>
1773 :       <br>
*/

	if( strcmp( funcname , "FS" ) == 0 ){
		int flg;
		flg = lssproto_demkstr_int( lssproto.token_list[2] );
		lssproto_FS_recv( fd,flg);
		return 0;
	}
/*
1785 :   <li><a name="SC_HL"><font color=blue>servertoclient HL( int flg);<br></font></a>
1786 :       (HeLp)HL????????????????¡P¥f????????¨Á???ıÍ?????????<br><br>
1787 :       <dl>
1788 :         <dt>int flg
1789 :         <dd> 0: ??????Off                  1: ??????On<br>
1790 :       </dl>
1791 :       <br>
1792 :       <br>
1793 :       <hr>
1794 :       <br>
*/

	if( strcmp( funcname , "HL" ) == 0 ){
		int flg;
		flg = lssproto_demkstr_int( lssproto.token_list[2] );
		lssproto_HL_recv( fd,flg);
		return 0;
	}
/*
1808 :   <li><a name="SC_PR"><font color=blue>servertoclient PR( int request, int result);<br></font></a>
1809 :       (PartyRequest)????????PR???????????????????ûõ?ûè??????
1810 :        ?????¥†¡t?ú×?ş©?§I????????
1811 :        <br><br>
1812 :       
1813 :       <dl>
1814 :       	<dt>int request
1815 :       	<dd>0: ?¢ 1:¦V¢
1816 :         <dt>int result
1817 :         <dd>0: ûº¦ 1: şÎ?
1818 :       </dl>
1819 :       <br>
1820 :       <br>
1821 :   <br>
1822 :       <hr>
1823 :       <br>
*/

	if( strcmp( funcname , "PR" ) == 0 ){
		int request;
		int result;
		request = lssproto_demkstr_int( lssproto.token_list[2] );
		result = lssproto_demkstr_int( lssproto.token_list[3] );
		lssproto_PR_recv( fd,request,result);
		return 0;
	}
/*
1835 :   <li><a name="SC_KS"><font color=blue>servertoclient KS( int petarray,int result);<br></font></a>
1836 :        ???????KS?¢n??¨ë????????¢¬??????????????
1837 :        ?????????????????????
1838 :        ???¡P¥f?üÒ??¡k¢‘????????????????ıÑ???????£t??????¡k¢‘?????????
1839 :        ???????????????
1840 :        <br><br>
1841 :       
1842 :       <dl>
1843 :       	<dt>int petarray
1844 :       	<dd>????§k?
1845 :       	<dt>int result
1846 :       	<dd>0: ûº¦????¡k¢‘????????? 1:şÎ?
1847 :       </dl>
1848 :       <br>
1849 :       <br>
1850 :       <hr>
1851 :       <br>
*/

	if( strcmp( funcname , "KS" ) == 0 ){
		int petarray;
		int result;
		petarray = lssproto_demkstr_int( lssproto.token_list[2] );
		result = lssproto_demkstr_int( lssproto.token_list[3] );
		lssproto_KS_recv( fd,petarray,result);
		return 0;
	}
/*
1935 :   <li><a name="SC_PS"><font color=blue>servertoclient PS( int result, int havepetindex, int havepetskill, int toindex);<br></font></a>
1936 :       (PetSkill use result)??????úé???????????PS?¢n??????????
1937 :       result ??????????PS?¢n???????????ıÆ??????????
1938 :       
1939 :       <dl>
1940 : 	<dt>int result
1941 : 	<dd>???0: ûº¦ 1:şÎ?
1942 :         <dt>int havepetindex
1943 :         <dd>?§k??????úé?????
1944 :         <dt>int havepetskill
1945 :         <dd>?§k????úé?????
1946 : 	<dt>int toindex
1947 : 	<dd> £M??©œ?úé???????????????????index????????????????
1948 : 	<pre>
1949 : 	  û«§Æ    = 0
1950 : 	  ???  = 1 ?5
1951 : 	  ??    = 6 ?10 ?S N ?0?4?¢n??û«§Æû«ş«????????
1952 : 	</pre>
1953 : 	¢nı¾?¡u????§Æ????????ıÍ??-1??ıï???<br>
1954 : 	<br>
1955 :       	    
1956 :       </dl>
1957 :       
1958 :       <br>
1959 :       <br>
1960 :       <hr>
1961 :       <br>
1962 : 
*/

	if( strcmp( funcname , "PS" ) == 0 ){
		int result;
		int havepetindex;
		int havepetskill;
		int toindex;
		result = lssproto_demkstr_int( lssproto.token_list[2] );
		havepetindex = lssproto_demkstr_int( lssproto.token_list[3] );
		havepetskill = lssproto_demkstr_int( lssproto.token_list[4] );
		toindex = lssproto_demkstr_int( lssproto.token_list[5] );
		lssproto_PS_recv( fd,result,havepetindex,havepetskill,toindex);
		return 0;
	}
/*
2011 :   <LI><a name="S2CSKUP"><font color=blue>servertoclient SKUP( int point );<br></font></a>
2012 :       (SKillUP)
2013 :       ????????????????¤G£l??????ıÆ??????úù¤e???
2014 :       <br>
2015 :       <br>
2016 :       <hr>
2017 :       <br>
2018 : 
*/

	if( strcmp( funcname , "SKUP" ) == 0 ){
		int point;
		point = lssproto_demkstr_int( lssproto.token_list[2] );
		lssproto_SKUP_recv( fd,point);
		return 0;
	}
/*
2047 :   <LI><a name="SC_WN"><font color=blue>servertoclient WN( int windowtype, int buttontype, int seqno, int objindex, string data );<br></font></a>
2048 :       (Window)<br>
2049 :       ??????¤úû¨???????????????¤G£l???<br>
2050 :       <br>
2051 :       <dl>
2052 :         <dt>int windowtype
2053 :         <dd>???????????????û°???????¤úû¨???????buttontype ?¡Š?????
2054 :             ???????¤e???<br>
2055 :             ???????????¡@¤e??????<br>
2056 :           <pre>
2057 : 		typedef enum
2058 : 		{
2059 : 			WINDOW_MESSAGETYPE_MESSAGE,			???????
2060 : 			WINDOW_MESSAGETYPE_MESSAGEANDLINEINPUT,		????????¦V?
2061 : 			WINDOW_MESSAGETYPE_SELECT,			¡k¢‘?????
2062 : 			WINDOW_MESSAGETYPE_PETSELECT,			???¡k¢‘?????
2063 : 			WINDOW_MESSAGETYPE_PARTYSELECT,			??¡k¢‘?????
2064 : 			WINDOW_MESSAGETYPE_PETANDPARTYSELECT,		??????¡k¢‘?????
2065 : 			WINDOW_MESSAGETYPE_ITEMSHOPMENU,		?¤•??????????
2066 : 			WINDOW_MWSSAGETYPE_ITEMSHOPYMAIN,		?¤•?????????
2067 : 			WINDOW_MESSAGETYPE_LIMITITEMSHOPMAIN,		??ûè?¡M???????????????
2068 : 			WINDOW_MESSAGETYPE_PETSKILLSHOP,		?????????????
2069 : 			WINDOW_MESSAGETYPE_WIDEMESSAGE,			????????¢†??©˜?
2070 : 			WINDOW_MESSAGETYPE_WIDEMESSAGEANDLINEINPUT,	????????¦V??¢†??©˜?
2071 : 
2072 : 		}WINDOW_MESSAGETYPE;
2073 : 	  </pre>
2074 : 
2075 :         <dt>int buttontype
2076 :         <dd>?????û°?úù¤e??????????????¤e???????<br>
2077 :             <pre>
2078 : 		#define		WINDOW_BUTTONTYPE_NONE		(0)
2079 : 		#define		WINDOW_BUTTONTYPE_OK		(1 << 0)
2080 : 		#define		WINDOW_BUTTONTYPE_CANCEL	(1 << 1)
2081 : 		#define		WINDOW_BUTTONTYPE_YES		(1 << 2)
2082 : 		#define		WINDOW_BUTTONTYPE_NO		(1 << 3)
2083 : 		#define		WINDOW_BUTTONTYPE_PREV		(1 << 4)
2084 : 		#define		WINDOW_BUTTONTYPE_NEXT		(1 << 5)
2085 :             </pre>
2086 :             ????¡Š??????ıï???????YES????NO?????????<br>
2087 :             WINDOW_BUTTONTYPE_YES | WINDOW_BUTTONTYPE_NO   (=12)<br>
2088 :             ????
2089 :             
2090 :         <dt>int seqno
2091 :         <dd>????????§k??û¨????????????
2092 :             ???????WN???????????????¨ë??????§k??¤–??¨ë????
2093 :             ?????????????NPC???ıÍş?????????§R£eüÒ????????
2094 :         <dt>int objindex
2095 :         <dd>????????üÒ?????NPC???index??¦t??????
2096 :             ?????üÒ?????ıÍ??-1???¦V?????
2097 :             ?????????????¦V???WN?????????£k?????¨ë?????
2098 :         <dt>string data
2099 :         <dd>?????¥›??û¨??¥›??????????"\n"??şú????????şs????
2100 :             ????????????????¤úû¨üÒ??????????û«¥h¤†???????
2101 :             ¡k¢‘????????????"\n"??şú???????????????????
2102 :             ?????????????????????????úù¤e?????¢Q??
2103 :             ????????????????¡k¢‘???????¡q???? 1 ??
2104 :             §k???????¡k¢‘??ıÍ??WN??¨ë????¨ë??
2105 :         <dt>string data(?¤•??
2106 :         <dd>?????¥›??û¨??¥›??????????"\n"??şú????????şs????
2107 :             ????????????????¤úû¨üÒ??????????û«¥h¤†???????
2108 :             ???¥›?????"?"??şú???????
2109 :    <br><br><dd>????<br>
2110 :  	???????????£º?????¡q????úé??????úé??£ºúé???£º1??
2111 : 		¤•?ş¡q???????¤•????????¡k¢‘?????????¢K??????????¦_??????
2112 : 		???????????????????ş???????????????£º?????£º???????????
2113 : 		£k£h???§k??¡Cş‘?????ş????????????????????£k£h???§k??¡Cş‘
2114 :       		<br><br>
2115 :       		0|1|????????|?????????????|???????????|??¢¬???|????§????????
2116 :       		¢K??????????|şo???????|?????????????????????????|
2117 :       		?|???|?????|??????\n??§I?|??|?|??|?????|??????\nşT?????§Ä\n???
2118 : 
2119 :         <br><dd><br>????<br>
2120 : 		???????????£º?????¡q????úé??????úé??£ºúé???£º1??
2121 : 		¤•?ş¡q???????¤•????????????????????????|?¦_??????
2122 : 		????ş????????????£k£h???§k??¡Cş‘?????ş????????????
2123 : 		£k£h???§k??¡Cş‘?
2124 :       
2125 :       	<br><br>
2126 :       		?|1|?????¥s??|?????????????????????????????|şo???????|
2127 :       		???????????????????????|?|??|?????|
2128 :       		??????\n??§I?|??|?|??|?????|??????\nşT?????§Ä\n???
2129 :         <br><dd><br>?????????<br>
2130 : 		??????=??????????????<br>
2131 : 		¤•?ş¡q?<br>
2132 : 		????????????ıÆ?????????????¦_??????<br>
2133 : 		ş¡q????????????¦u???¦Û?????£k£h???§k??????????????§k??????<br>
2134 : 		ş¡q????????????¦u???¦Û?????£k£h???§k??????????????§k??????<br>
2135 :         <br><dd><br>???????ûè??<br>
2136 : 		??????ûè?=???
2137 : 		¤•?ş¡q???üÒ?????????????¦????????|?¦_??????<br>
2138 : 		ş¡q???üÒ???????????¦u???¦Û?????????????£k£h???§k?????????<br>
2139 : 		ş¡q???üÒ???????????¦u???¦Û?????????????£k£h???§k?????????<br>
2140 : 
2141 : 
2142 :         <br><dd><br>???¢\?<br>
2143 : 		¤•?ş¡q??????
2144 :       
2145 :       	<br><br>
2146 :       		?????¥s??|????????????
2147 : 
2148 : 	<br><br><br>
2149 :         <dt>string data(??????????
2150 :         <dd>?????¥›??û¨??¥›??????????"\n"??şú????????şs????
2151 :             ????????????????¤úû¨üÒ??????????û«¥h¤†???????
2152 :             ???¥›?????"?"??şú???????
2153 : 	   <br><br><dd>??????ûè¥x?<br>
2154 : 		¡q?ıÑ©úé???????úé?£º0  úé???£º1??¤•?ş¡q??????????
2155 : 		?ş?£k£h??¡Cş‘??ş?£k£h??¡Cş‘
2156 : 	<br><br>
2157 : 		1?????????????????????????????????
2158 : 		¦‘??ş»????500?????????  ş\??????????
2159 : 		Ô??ü·?1000?ıø??§D???????¤ˆ???	
2160 :       </dl>
2161 :       <br>
2162 :       <br>
2163 :       <hr>
2164 :       <br>
2165 :       
*/

	if( strcmp( funcname , "WN" ) == 0 ){
		int windowtype;
		int buttontype;
		int seqno;
		int objindex;
		char* data;
		windowtype = lssproto_demkstr_int( lssproto.token_list[2] );
		buttontype = lssproto_demkstr_int( lssproto.token_list[3] );
		seqno = lssproto_demkstr_int( lssproto.token_list[4] );
		objindex = lssproto_demkstr_int( lssproto.token_list[5] );
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[5] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[6] ));
		lssproto_WN_recv( fd,windowtype,buttontype,seqno,objindex,data);
		return 0;
	}
/*
2196 :   <LI><a name="SC_EF"><font color=blue>servertoclient EF( int effect, int level, string option );<br></font></a>
2197 :       (EFfect)<br>
2198 :       ¡D????????????????¡u¢l¤†???¤ú???????<br>
2199 :       <br>
2200 :       <dl>
2201 :         <dt>int effect
2202 :         <dd>??§k???????¢K?úÜ?????©˜??????¥x????????????¡D???????????
2203 :           <ul>
2204 :             <li>1:?
2205 :             <li>2:¡D
2206 :             <li>4:??¡D??¤e?
2207 :           </ul>
2208 :         <dt>int level
2209 :         <dd>????????ı¤??????¤ú?????¤ú??
2210 :         <dt>string option
2211 :         <dd>???£?
2212 :       </dl>
2213 :       <br>
2214 :       <br>
2215 :       <hr>
2216 :       <br>
2217 : 
*/

	if( strcmp( funcname , "EF" ) == 0 ){
		int effect;
		int level;
		char* option;
		effect = lssproto_demkstr_int( lssproto.token_list[2] );
		level = lssproto_demkstr_int( lssproto.token_list[3] );
		option = lssproto_wrapStringAddr( lssproto_stringwrapper[3] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[4] ));
		lssproto_EF_recv( fd,effect,level,option);
		return 0;
	}
/*
2218 :   <LI><a name="SC_SE"><font color=blue>servertoclient SE( int x, int y, int senumber, int sw );<br></font></a>
2219 :       (SoundEffect)<br>
2220 : 	???????SE?ş•?????úùû¨???<br>
2221 :       <br>
2222 :       <dl>
2223 :         <dt>int x,y
2224 :         <dd>SE?§Dıï???¤õ?
2225 :         <dt>int senumber
2226 :         <dd>???§k?
2227 :         <dt>int sw
2228 :         <dd>???ş•???û¢????
2229 :           <ul>
2230 :             <li>0:û¢??
2231 :             <li>1:ş•??
2232 :           </ul>
2233 :       </dl>
2234 :       <br>
2235 :       <br>
2236 :       <hr>
2237 :       <br>
*/

	if( strcmp( funcname , "SE" ) == 0 ){
		int x;
		int y;
		int senumber;
		int sw;
		x = lssproto_demkstr_int( lssproto.token_list[2] );
		y = lssproto_demkstr_int( lssproto.token_list[3] );
		senumber = lssproto_demkstr_int( lssproto.token_list[4] );
		sw = lssproto_demkstr_int( lssproto.token_list[5] );
		lssproto_SE_recv( fd,x,y,senumber,sw);
		return 0;
	}
/*
2271 :   <LI><a name="SC_CLIENTLOGIN"><font color=blue>servertoclient ClientLogin(string result);<br></font></a>
2272 :       ClientLogin?¨ë??
2273 :       <br><br>
2274 :       <dl>
2275 : 	<dt>string result
2276 : 	<dd>"ok" ???§ó?????§ó?????????????
2277 :       </dl>
2278 :       <br>
2279 :       <br>
2280 :       <hr>
2281 :       <br>
2282 : 
2283 :       
*/

	if( strcmp( funcname , "ClientLogin" ) == 0 ){
		char* result;
		result = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_ClientLogin_recv( fd,result);
		return 0;
	}
/*
2314 :   <LI><a name="SC_CREATENEWCHAR"><font color=blue>servertoclient CreateNewChar(string result,string data);<br></font></a>
2315 :       CreateNewChar?¨ë??
2316 :       <br><br>
2317 :       <dl>
2318 : 	<dt>string result
2319 : 	<dd>"successful" ? "failed" ????????§ó???????
2320 : 	    ?????
2321 : 	<dt>string data
2322 : 	<dd>"failed" ??????û¨?ş°????§Æ?§ó?
2323 : 	    ????????????????¨ë?????????
2324 : 	    ???§ó??
2325 : 	    <pre>
2326 : 	    "failed bad parameter"
2327 : 	    </pre>
2328 : 	    ?ıÍ???????şÎ?????¤e???????§d?????
2329 : 	    ????????şs??????????????üÒ?????
2330 : 	    ?????????§ó????????????
2331 : 	    
2332 :       </dl>
2333 :       <br>
2334 :       <br>
2335 :       <hr>
2336 :       <br>
2337 : 
*/

	if( strcmp( funcname , "CreateNewChar" ) == 0 ){
		char* result;
		char* data;
		result = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[2] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[3] ));
		lssproto_CreateNewChar_recv( fd,result,data);
		return 0;
	}
/*
2349 :   <LI><a name="SC_CHARDELETE"><font color=blue>servertoclient CharDelete(string result,string data);<br></font></a>
2350 :       CharDelete ?¨ë??
2351 :       <br><br>
2352 :       <dl>
2353 : 	<dt>string result
2354 : 	<dd>"successful" ? "failed" ???????????????
2355 : 	<dt>string data
2356 : 	<dd>"failed" ??????û¨?ş°????§Æ?§ó?
2357 : 	    ????????????????¨ë?????????
2358 : 	    ??????????????????????
2359 :       </dl>
2360 :       <br>
2361 :       <br>
2362 :       <hr>
2363 :       <br>
2364 : 
2365 : 
*/

	if( strcmp( funcname , "CharDelete" ) == 0 ){
		char* result;
		char* data;
		result = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[2] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[3] ));
		lssproto_CharDelete_recv( fd,result,data);
		return 0;
	}
/*
2376 :   <LI><a name="SC_CHARLOGIN"><font color=blue>servertoclient CharLogin(string result,string data);<br></font></a>
2377 :       CharaLogin?¨ë??
2378 :       <br><br>
2379 :       <dl>
2380 : 	<dt>string result
2381 : 	<dd>"successful" ? "failed" ???????????????
2382 : 	<dt>string data
2383 : 	<dd>"failed" ??? ?????§ó????????????
2384 :       </dl>
2385 :       <br>
2386 :       <br>
2387 :       <hr>
2388 :       <br>
2389 : 
2390 : 
*/

	if( strcmp( funcname , "CharLogin" ) == 0 ){
		char* result;
		char* data;
		result = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[2] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[3] ));
		lssproto_CharLogin_recv( fd,result,data);
		return 0;
	}
/*
2396 :   <LI><a name="SC_CHARLIST"><font color=blue>servertoclient CharList(string result,string data);<br></font></a>
2397 :       CharList?¨ë??
2398 :       <br><br>
2399 :       <dl>
2400 : 	<dt>string result
2401 : 	<dd>"successful" ? "failed" ??????????????
2402 : 	<dt>string data
2403 : 	<dd>result?"successful"??????????????¨ò¢V???
2404 : 	    ??????????ş¡q??????????????şú??
2405 : 	    ???§ó?????§ó????????????????????
2406 : 	    result ? "failed" ??????û¨?ş°????§Æ?§ó???
2407 : 	    ???şÎ???????????ş«???????????<br>
2408 : 	    dataplace|faceimage|level|maxhp|atk|def|quick|charm|earth|water|fire|wind|logincount|name|place<br>
2409 : 	    
2410 : 	    <dl>
2411 : 	      <dt>dataplace
2412 : 	      <dd>????????§k?????????????????§k????¤e???
2413 : 	      <dt>faceimage
2414 : 	      <dd>????§k?
2415 : 	      <dt>level
2416 : 	      <dd>???????
2417 : 	      <dt>maxhp,atk,def,quick,charm
2418 : 	      <dd>???????
2419 : 	      <dt>earth.water,fire,wind
2420 : 	      <dd>?¢NşÍ£k
2421 : 	      <dt>logincount
2422 : 	      <dd>????????
2423 : 	      <dt>name
2424 : 	      <dd>????ş¡q
2425 : 	      <dt>place
2426 : 	      <dd>??????ıÍ?
2427 : 	    </dl>
2428 : 	    "|" ??şú?????? ?????????<a
2429 : 	    href="#escaping">?????</a>????????????şS
2430 : 	    ??????<br>
2431 : 	    
2432 :       </dl>
2433 :       <br>
2434 :       <br>
2435 :       <hr>
2436 :       <br>
2437 : 
*/

	if( strcmp( funcname , "CharList" ) == 0 ){
		char* result;
		char* data;
		result = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[2] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[3] ));
		lssproto_CharList_recv( fd,result,data);
		return 0;
	}
/*
2445 :   <LI><a name="SC_CHARLOGOUT"><font color=blue>servertoclient CharLogout(string result , string data);<br></font></a>
2446 :       Logout?¢n??¨ë??
2447 :       <br><br>
2448 :       <dl>
2449 : 	<dt>string result
2450 : 	<dd>"successful" ? "failed" ???????????????
2451 : 	<dt>string data
2452 : 	<dd>"failed" ??????şs????ûº¦???(ıÖ¢t)?û¨?ş°?
2453 : 	    ???§Æ?§ó???????????????
2454 :       </dl>
2455 :       <br>
2456 :       <br>
2457 :       <hr>
2458 :       <br>
*/

	if( strcmp( funcname , "CharLogout" ) == 0 ){
		char* result;
		char* data;
		result = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[2] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[3] ));
		lssproto_CharLogout_recv( fd,result,data);
		return 0;
	}
/*
2465 :   <LI><a name="SC_PROCGET"><font color=blue>servertoclient ProcGet( string data);<br></font></a>
2466 : 	ProcGet?¨ë??
2467 :       <br><br>
2468 :       <dl>
2469 : 	<dt>string data
2470 : 	<dd>????????????????¥›?ıÑ©??ıï???¥›??log/proc?????????¥›??¥i??
2471 :       </dl>
2472 :       <br>
2473 :       <br>
2474 :       <hr>
2475 :       <br>
2476 : 
*/

	if( strcmp( funcname , "ProcGet" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_ProcGet_recv( fd,data);
		return 0;
	}
/*
2483 :   <LI><a name="SC_PLAYERNUMGET"><font color=blue>servertoclient PlayerNumGet( int logincount, int player);<br></font></a>
2484 : 	PlayerNumGet?¨ë??
2485 :       <br><br>
2486 :       <dl>
2487 : 	<dt>int logincount,player
2488 : 	<dd>
2489 :       </dl>
2490 :       <br>
2491 :       <br>
2492 :       <hr>
2493 :       <br>
2494 : 
*/

	if( strcmp( funcname , "PlayerNumGet" ) == 0 ){
		int logincount;
		int player;
		logincount = lssproto_demkstr_int( lssproto.token_list[2] );
		player = lssproto_demkstr_int( lssproto.token_list[3] );
		lssproto_PlayerNumGet_recv( fd,logincount,player);
		return 0;
	}
/*
2506 :   <LI><a name="SC_ECHO"><font color=blue>servertoclient Echo( string test );<br></font></a>
2507 :       Echo?¢n??¨ë??
2508 :       <dl>
2509 : 	<dt>string test
2510 : 	<dd>????¦V????§ó????????????
2511 :       </dl>
2512 :       <br>
2513 :       <br>
2514 :       <hr>
2515 :       <br>
2516 :   
*/

	if( strcmp( funcname , "Echo" ) == 0 ){
		char* test;
		test = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_Echo_recv( fd,test);
		return 0;
	}

//-------------------------------------------------------
//	Add Command Count
//	Robin 2001/04/06
//-------------------------------------------------------

	if( strcmp( funcname , "NU" ) == 0 ){
		int AddCount;
		AddCount = lssproto_demkstr_int( lssproto.token_list[2] );
		lssproto_NU_recv( fd, AddCount);
		return 0;
	}

	// Robin 04/12 trade
	if( strcmp( funcname , "TD" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[2] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[3] ));
		lssproto_TD_recv( fd, data);
		return 0;
	}

	//	Robin 0529 family
	if( strcmp( funcname , "FM" ) == 0 ){
		char* data;
		data = lssproto_wrapStringAddr( lssproto_stringwrapper[1] , lssproto.workbufsize , lssproto_demkstr_string( lssproto.token_list[2] ));
		lssproto_FM_recv( fd, data);
		//lssproto_FM_recv( fd, lssproto_stringwrapper[0] );
		return 0;
	}

	return -1;
}
void lssproto_SetClientLogFiles( char *r , char *w )
{
	lssproto_strcpysafe( lssproto_readlogfilename , r , sizeof( lssproto_readlogfilename ) );
	lssproto_strcpysafe( lssproto_writelogfilename , w , sizeof( lssproto_writelogfilename ) );
}
int lssproto_InitClient( int (*writefunc)(int,char*,int) ,int bufsiz ,int fd)
{
	int i;
	if( (void*)writefunc == NULL){lssproto.write_func = lssproto_default_write_wrap;} else {lssproto.write_func = writefunc;}
	lssproto_AllocateCommonWork(bufsiz);
	lssproto_stringwrapper = (char**)malloc(sizeof(char*) * MAXLSRPCARGS);
	if(lssproto_stringwrapper ==NULL)return -1;
	memset( lssproto_stringwrapper , 0, sizeof(char*)*MAXLSRPCARGS);
	for(i=0;i<MAXLSRPCARGS;i++){
		lssproto_stringwrapper[i] = (char*)malloc( bufsiz );
		if( lssproto_stringwrapper[i] == NULL){
			for(i=0;i<MAXLSRPCARGS;i++){FREE( lssproto_stringwrapper[i]);return -1;}
		}
	}
	return 0;
}
void lssproto_CleanupClient( void )
{
	int i;
	// Nuke start
	/*{ 
		int i;
		if (NJT_dummy) FREE(NJT_dummy);
		for (i=0;i<NJT_MAX;i++) if (NJT[i]) FREE(NJT[i]);
	}*/
	// Nuke end
	FREE( lssproto.work );
	lssproto.work = NULL;
	FREE( lssproto.arraywork);
	lssproto.arraywork = NULL;
	FREE( lssproto.escapework );
	lssproto.escapework = NULL;
	FREE( lssproto.val_str);
	lssproto.val_str = NULL;
	FREE( lssproto.token_list );
	lssproto.token_list = NULL;
	FREE( lssproto.cryptwork );
	lssproto.cryptwork = NULL;
	FREE( lssproto.jencodecopy );
	lssproto.jencodecopy = NULL;
	FREE( lssproto.jencodeout );
	lssproto.jencodeout = NULL;
	FREE( lssproto.compresswork );
	lssproto.compresswork = NULL;
	for(i=0;i<MAXLSRPCARGS;i++){
		FREE( lssproto_stringwrapper[i]);
		lssproto_stringwrapper[i] = NULL;
	}
	FREE( lssproto_stringwrapper );
	lssproto_stringwrapper = NULL;
}
/* end of the generated client code */

//#endif